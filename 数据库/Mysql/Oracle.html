<div id="article_content" class="article_content clearfix">
        <link rel="stylesheet" href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/ck_htmledit_views-b5506197d8.css">
                <div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p>
<div class="toc">
 <h3><a name="t0"></a><a name="t0"></a>目录</h3>
 <ul><li><ul><li><a href="#__7" target="_self">第一章 数据库概述</a></li><li><ul><li><a href="#11_9" target="_self">1.1、数据库的好处</a></li><li><a href="#12_14" target="_self">1.2、数据库的常见概念</a></li><li><a href="#13_21" target="_self">1.3、数据库的存储特点</a></li><li><a href="#14_28" target="_self">1.4、数据库的常见分类</a></li><li><a href="#15SQL_37" target="_self">1.5、SQL语言的分类</a></li></ul>
   </li><li><a href="#_Oracle_45" target="_self">第二章 Oracle概述</a></li><li><ul><li><a href="#21Oracle_47" target="_self">2.1、Oracle的概述</a></li><li><a href="#22Oracle_51" target="_self">2.2、Oracle的下载</a></li><li><a href="#23Oracle_63" target="_self">2.3、Oracle的安装</a></li><li><a href="#24Oracle_93" target="_self">2.4、Oracle的目录</a></li><li><a href="#25Oracle_134" target="_self">2.5、Oracle的配置</a></li><li><a href="#26Oracle_172" target="_self">2.6、Oracle的命令行连接</a></li><li><a href="#27Oracle_184" target="_self">2.7、Oracle的窗口化连接</a></li><li><a href="#28Oracle_218" target="_self">2.8、Oracle的体系结构</a></li><li><a href="#29Oracle_227" target="_self">2.9、Oracle的测试用户</a></li></ul>
   </li><li><a href="#_DQL_237" target="_self">第三章 DQL语言</a></li><li><ul><li><a href="#31_239" target="_self">3.1、完整语法</a></li><li><a href="#32_263" target="_self">3.2、简单查询</a></li><li><a href="#33_270" target="_self">3.3、别名查询</a></li><li><a href="#34_277" target="_self">3.4、去重查询</a></li><li><a href="#35_284" target="_self">3.5、条件查询</a></li><li><a href="#36_305" target="_self">3.6、分组查询</a></li><li><a href="#37_312" target="_self">3.7、分组过滤</a></li><li><a href="#38_322" target="_self">3.8、排序查询</a></li><li><a href="#39_329" target="_self">3.9、分页查询</a></li><li><a href="#310_339" target="_self">3.10、多表查询</a></li><li><a href="#311_356" target="_self">3.11、联合查询</a></li><li><a href="#312_401" target="_self">3.12、子查询</a></li></ul>
   </li><li><a href="#__448" target="_self">第四章 函数大全</a></li><li><ul><li><a href="#41_452" target="_self">4.1、数值型函数</a></li><li><a href="#42_456" target="_self">4.2、字符型函数</a></li><li><a href="#43_460" target="_self">4.3、日期函数</a></li><li><a href="#44_464" target="_self">4.4、转换函数</a></li><li><a href="#45_468" target="_self">4.5、聚组函数</a></li><li><a href="#46_472" target="_self">4.6、分析函数</a></li><li><a href="#47_476" target="_self">4.7、其它函数</a></li></ul>
   </li><li><a href="#_DCL_480" target="_self">第五章 DCL语言</a></li><li><ul><li><a href="#51_482" target="_self">5.1、创建表空间</a></li><li><a href="#52_504" target="_self">5.2、删除表空间</a></li><li><a href="#53_518" target="_self">5.3、创建用户</a></li><li><a href="#54_536" target="_self">5.4、删除用户</a></li><li><a href="#55_538" target="_self">5.5、授权用户</a></li><li><a href="#56_572" target="_self">5.6、取消授权</a></li><li><a href="#57_600" target="_self">5.7、修改密码</a></li></ul>
   </li><li><a href="#_DDL_614" target="_self">第六章 DDL语言</a></li><li><ul><li><a href="#61_616" target="_self">6.1、数据类型</a></li><li><a href="#62_635" target="_self">6.2、创建表</a></li><li><a href="#63_656" target="_self">6.3、复制表</a></li><li><a href="#64_672" target="_self">6.4、删除表</a></li><li><a href="#65_688" target="_self">6.5、修改表</a></li><li><a href="#66_725" target="_self">6.6、表约束</a></li></ul>
   </li><li><a href="#_DML_810" target="_self">第七章 DML语言</a></li><li><ul><li><a href="#71_812" target="_self">7.1、插入语句</a></li><li><a href="#72_820" target="_self">7.2、修改语句</a></li><li><a href="#73_828" target="_self">7.3、删除语句</a></li></ul>
   </li><li><a href="#_TCL_836" target="_self">第八章 TCL语言</a></li><li><ul><li><a href="#81_838" target="_self">8.1、事务</a></li><li><a href="#82_869" target="_self">8.2、事务并发（读问题）</a></li><li><a href="#83_889" target="_self">8.3、丢失更新（写问题）</a></li></ul>
   </li><li><a href="#__906" target="_self">第九章 高级部分</a></li><li><ul><li><a href="#91_908" target="_self">9.1、序列</a></li><li><a href="#92PLSQL_943" target="_self">9.2、PLSQL编程</a></li><li><ul><li><a href="#921_945" target="_self">9.2.1、格式</a></li><li><a href="#922_957" target="_self">9.2.2、变量</a></li><li><a href="#923if_989" target="_self">9.2.3、if判断</a></li><li><a href="#924while_1021" target="_self">9.2.4、while循环</a></li><li><a href="#925for_1045" target="_self">9.2.5、for循环</a></li><li><a href="#926loop_1068" target="_self">9.2.6、loop循环</a></li><li><a href="#927_1095" target="_self">9.2.7、意外</a></li></ul>
    </li><li><a href="#93_1219" target="_self">9.3、索引</a></li><li><a href="#94_1285" target="_self">9.4、视图</a></li><li><a href="#95_1337" target="_self">9.5、同义词</a></li><li><a href="#96_1389" target="_self">9.6、游标</a></li><li><a href="#97_1479" target="_self">9.7、存储过程</a></li><li><a href="#98_1587" target="_self">9.8、函数</a></li><li><a href="#99_1695" target="_self">9.9、触发器</a></li></ul>
   </li><li><a href="#__1819" target="_self">第十章 数据备份与恢复</a></li><li><ul><li><a href="#101_1821" target="_self">10.1、全部导出</a></li><li><a href="#102_1828" target="_self">10.2、全部导入</a></li><li><a href="#103_1835" target="_self">10.3、按用户导出</a></li><li><a href="#104_1842" target="_self">10.4、按用户导入</a></li></ul>
   </li><li><a href="#_Oracle_1849" target="_self">第十一章 安装Oracle单实例</a></li><li><ul><li><a href="#111_1851" target="_self">11.1、环境准备</a></li><li><a href="#112_1863" target="_self">11.2、下载程序</a></li><li><a href="#113_1879" target="_self">11.3、解压程序</a></li><li><a href="#114_1895" target="_self">11.4、移动软件</a></li><li><a href="#115_1902" target="_self">11.5、域名映射</a></li><li><a href="#116selinux_1932" target="_self">11.6、关闭selinux</a></li><li><a href="#117_1948" target="_self">11.7、关闭防火墙</a></li><li><a href="#118_1955" target="_self">11.8、安装依赖包</a></li><li><a href="#119_1961" target="_self">11.9、添加新用户</a></li><li><a href="#1110_1970" target="_self">11.10、修改内核文件</a></li><li><a href="#1111_1998" target="_self">11.11、修改用户限制</a></li><li><a href="#1112_2019" target="_self">11.12、创建安装目录</a></li><li><a href="#1113_2029" target="_self">11.13、设置环境变量</a></li><li><a href="#1114_2054" target="_self">11.14、安装应用程序</a></li><li><a href="#1115sqlplus_2152" target="_self">11.15、使用sqlplus连接</a></li></ul>
  </li></ul>
 </li></ul>
</div>
<p></p> 
<hr> 
<p><strong>配套资料，免费下载</strong><br> 链接:https://pan.baidu.com/s/1yjJY3IstA8aMQBPYhWNlCw<br> 提取码:qmpd<br> 复制这段内容后打开百度网盘手机App，操作更方便哦</p> 
<h2><a name="t1"></a><a name="t1"></a><a id="__7"></a>第一章 数据库概述</h2> 
<h3><a name="t2"></a><a name="t2"></a><a id="11_9"></a>1.1、数据库的好处</h3> 
<ol><li>将数据持久化到本地</li><li>提供结构化查询功能</li></ol> 
<h3><a name="t3"></a><a name="t3"></a><a id="12_14"></a>1.2、数据库的常见概念</h3> 
<ol><li>DB：数据库，存储数据的仓库</li><li>DBMS：数据库管理系统，又称为数据库软件或者数据库产品，用于创建和管理数据库，常见的有MySQL、Oracle、SQL Server</li><li>DBS：数据库系统，数据库系统是一个通称，包括数据库、数据库管理系统、数据库管理人员等，是最大的范畴</li><li>SQL：结构化查询语言，用于和数据库通信的语言，不是某个数据库软件特有的，而是几乎所有的主流数据库软件通用的语言</li></ol> 
<h3><a name="t4"></a><a name="t4"></a><a id="13_21"></a>1.3、数据库的存储特点</h3> 
<ol><li>数据存放到表中，然后表再放到库中</li><li>一个库中可以有多张表，每张表具有唯一的表名用来标识自己</li><li>表中有一个或多个列，列又称为“字段”，相当于Java中“属性”</li><li>表中的每一行数据，相当于Java中“对象”</li></ol> 
<h3><a name="t5"></a><a name="t5"></a><a id="14_28"></a>1.4、数据库的常见分类</h3> 
<ol><li>关系型数据库：MySQL、Oracle、DB2、SQL Server</li><li>非关系型数据库： 
  <ul><li>键值存储数据库：Redis、Memcached、MemcacheDB</li><li>列存储数据库：HBase、Cassandra</li><li>面向文档的数据库：MongDB、CouchDB</li><li>图形数据库：Neo4J</li></ul> </li></ol> 
<h3><a name="t6"></a><a name="t6"></a><a id="15SQL_37"></a>1.5、SQL语言的分类</h3> 
<ol><li>DQL：数据查询语言：select、from、where</li><li>DCL：数据控制语言：grant、revoke</li><li>DDL：数据定义语言：create、alter、drop、truncate</li><li>DML：数据操作语言：insert、update、delete</li><li>TCL：事务控制语言：commit、rollback</li></ol> 
<h2><a name="t7"></a><a name="t7"></a><a id="_Oracle_45"></a>第二章 Oracle概述</h2> 
<h3><a name="t8"></a><a name="t8"></a><a id="21Oracle_47"></a>2.1、Oracle的概述</h3> 
<p>Oracle Database，又名Oracle RDBMS，或简称Oracle。是甲骨文公司的一款关系数据库管理系统。它是在数据库领域一直处于领先地位的产品。可以说Oracle数据库系统是目前世界上流行的关系数据库管理系统，系统可移植性好、使用方便、功能强，适用于各类大、中、小、微机环境。它是一种高效率、可靠性好的、适应高吞吐量的数据库方案</p> 
<h3><a name="t9"></a><a name="t9"></a><a id="22Oracle_51"></a>2.2、Oracle的下载</h3> 
<p>课程使用：Windows 10</p> 
<p>官网地址：<a href="https://www.oracle.com/cn/database/technologies/oracle-database-software-downloads.html--11g">Oracle 11gR2</a></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMTQ1MTUucG5n?x-oss-process=image/format,png" alt="image-20200809214513718"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMTUyMjMucG5n?x-oss-process=image/format,png" alt="image-20200809215221852"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjA0MjcucG5n?x-oss-process=image/format,png" alt="image-20200809220127569"></p> 
<h3><a name="t10"></a><a name="t10"></a><a id="23Oracle_63"></a>2.3、Oracle的安装</h3> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjAzMzYucG5n?x-oss-process=image/format,png" alt="image-20200809220334062"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjA0MTQucG5n?x-oss-process=image/format,png" alt="image-20200809220412425"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjA1MDIucG5n?x-oss-process=image/format,png" alt="image-20200809220458814"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjA1MjMucG5n?x-oss-process=image/format,png" alt="image-20200809220521133"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjExMDUucG5n?x-oss-process=image/format,png" alt="image-20200809221103758"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjExNDUucG5n?x-oss-process=image/format,png" alt="image-20200809221143688"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjEyMTQucG5n?x-oss-process=image/format,png" alt="image-20200809221212205"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjE4MTAucG5n?x-oss-process=image/format,png" alt="image-20200809221808935"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjI5NDgucG5n?x-oss-process=image/format,png" alt="image-20200809222944086"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjMxMTUucG5n?x-oss-process=image/format,png" alt="image-20200809223113121"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjM1MTcucG5n?x-oss-process=image/format,png" alt="image-20200809223516529"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjM2MTQucG5n?x-oss-process=image/format,png" alt="image-20200809223612406"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjM2MzEucG5n?x-oss-process=image/format,png" alt="image-20200809223629903"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMjM2NTcucG5n?x-oss-process=image/format,png" alt="image-20200809223655389"></p> 
<h3><a name="t11"></a><a name="t11"></a><a id="24Oracle_93"></a>2.4、Oracle的目录</h3> 
<ol><li> <p>admin目录<br> 描述：记录Oracle实例的配置，运行日志等文件，每一个实例一个目录，SID：SystemIDentifier的缩写，是Oracle实例的唯一标记，在Oracle中一个实例只能操作一个数据库，如果安装多个库那么就会有多个实例，我们可以通过实例SID来区分。</p> </li><li> <p>cfgtoollogs目录<br> 描述：下面子目录分别存放当运行dbca，emca，netca等图形化配置程序时的log。</p> </li><li> <p>checkpoints目录<br> 描述：存放检查点文件。</p> </li><li> <p>diag目录<br> 描述：Oracle11g添加的一个重组目录，其中的子目录，基本上Oracle每个组件都有了自己的单独目录，在Oracle10g中我们诟病的log文件散放在四处的问题终于得到解决，无论是asm还是crs还是rdbms，所有组件需要被用来诊断的log文件都存放在这个新的目录下。</p> </li><li> <p>flash_recovery_area(闪回区)目录<br> 描述：分配一个特定的目录位置来存放一些特定的恢复文件，用于集中和简化管理数据库恢复工作。闪回区可存储完全的数据文件备份，增量备份、数据文件副本、当前控制文件、备份的控制文件、spfile文件、快照控制文件、联机日志文件、归档日志、块跟踪文件、闪回日志。</p> </li><li> <p>oradata目录</p> <p>描述：存放数据文件。</p> 
  <ul><li>CONTROL01.CTL<br> 描述：Oracle数据库的控制文件</li><li>EXAMPLE01.DBF<br> 描述：Oracle数据库表空间文件</li><li>REDO01.LOG<br> 描述：Oracle数据库的重做日志文件，此文件有三个</li><li>SYSAUX01.DBF<br> 描述：11g新增加的表空间，主要存储除数据字典以外的其他数据对象，由系统内部自动维护</li><li>SYSTEM01.DBF<br> 描述：用于存放Oracle系统内部表和数据字典的数据。比如：表名、列名、用户名等</li><li>TEMP01.DBF<br> 描述：临时表空间文件</li><li>UNDOTBS01.DBF<br> 描述：撤销表空间文件，用来保存回滚数据</li><li>USERS01.DBF<br> 描述：用户表空间</li></ul> </li><li> <p>product目录<br> 描述：数据库实例存放文件。</p> </li></ol> 
<h3><a name="t12"></a><a name="t12"></a><a id="25Oracle_134"></a>2.5、Oracle的配置</h3> 
<p>前方高能：如果你是把Oracle 11gR2直接安装到本地电脑上的，这一章，你就直接跳过吧！</p> 
<p>注意事项：如果你是把Oracle 11gR2安装到了服务器中，那么你要想客户端远程访问，接下来的这些步骤，请你仔细阅读！</p> 
<p>客户端为了和服务器连接，必须先和服务器上的监听进程联络。ORACLE通过tnsnames.ora文件中的连接描述符来说明连接信息。一般tnsnames.ora 是建立在客户端上的。如果是客户端/服务器结构，整个网络上只有一台机器安装了ORACLE数据库服务器，那么只需在每个要访问ORACLE服务器的客户端上定义该文件，在服务器上无需定义。也就是说，如果客户端想连接到服务器上的Oracle数据库实例，客户端就必须有tnsnames.ora这个文件。一般在Oracle数据库安装的时候，它就会生成一个listener.ora（监听器配置文件）、tnsnames.ora（网络服务名配置文件），因为我们现在已经将Oracle安装到本地了，并没有安装到服务器上，为了能够测试连接服务器是否需要tnsnames.ora文件，我们假设D:\Oracle是服务器上的一个目录，D:\Oracle以外都是客户端的目录。</p> 
<p>第一步：打开文件夹（假设当前电脑是服务器）：D:\Oracle\product\11.2.0\dbhome_1\NETWORK\ADMIN</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzEyMTAucG5n?x-oss-process=image/format,png" alt="image-20200809231208313"></p> 
<p>第二步：获取服务器IP地址（假设当前电脑是服务器）：192.168.1.3</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzE1MjYucG5n?x-oss-process=image/format,png" alt="image-20200809231525406"></p> 
<p>第三步：修改listener.ora文件（假设当前电脑是服务器）：</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzE3NTkucG5n?x-oss-process=image/format,png" alt="image-20200809231758605"></p> 
<p>第四步：修改tnsnames.ora文件（假设当前电脑是服务器）：</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzIzMzAucG5n?x-oss-process=image/format,png" alt="image-20200809232329025"></p> 
<p>第五步：重启服务器Oracle的服务（假设当前电脑是服务器）：</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzI3NDgucG5n?x-oss-process=image/format,png" alt="image-20200809232747049"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzI4NTMucG5n?x-oss-process=image/format,png" alt="image-20200809232851380"></p> 
<p>第六步：复制tnsnames.ora文件到客户端（假设当前电脑是客户端）：D:\Config</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzMzMTkucG5n?x-oss-process=image/format,png" alt="image-20200809233318424"></p> 
<p>第七步：配置tnsnames.ora文件到环境变量（假设当前电脑是客户端）：TNS_ADMIN = D:\Config</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzM2MzAucG5n?x-oss-process=image/format,png" alt="image-20200809233629528"></p> 
<h3><a name="t13"></a><a name="t13"></a><a id="26Oracle_172"></a>2.6、Oracle的命令行连接</h3> 
<p>Oracle数据库的连接不像MySQL那样可以直接使用CMD窗口就能连接，它需要一些辅助软件，也就是下边的sqlplus。</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzQzMTAucG5n?x-oss-process=image/format,png" alt="image-20200809234309060"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzQ0MjQucG5n?x-oss-process=image/format,png" alt="image-20200809234422705"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzQ1NDkucG5n?x-oss-process=image/format,png" alt="image-20200809234547756"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzUwNTEucG5n?x-oss-process=image/format,png" alt="image-20200809235049935"></p> 
<h3><a name="t14"></a><a name="t14"></a><a id="27Oracle_184"></a>2.7、Oracle的窗口化连接</h3> 
<p>既然是使用窗口化连接，那我们就需要一个窗口化连接的工具，这里我们使用的是代码补全提示比较好的PLSQL Developer。</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzUzMzAucG5n?x-oss-process=image/format,png" alt="image-20200809235327253"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzU0MDMucG5n?x-oss-process=image/format,png" alt="image-20200809235401907"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzU0MjQucG5n?x-oss-process=image/format,png" alt="image-20200809235421415"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzU1MTkucG5n?x-oss-process=image/format,png" alt="image-20200809235518112"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzU1MzUucG5n?x-oss-process=image/format,png" alt="image-20200809235533992"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzU1NDkucG5n?x-oss-process=image/format,png" alt="image-20200809235548207"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzU2MTQucG5n?x-oss-process=image/format,png" alt="image-20200809235613392"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MDkyMzU5MTAucG5n?x-oss-process=image/format,png" alt="image-20200809235908684"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTAwMDAxMjMucG5n?x-oss-process=image/format,png" alt="image-20200810000121782"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTAwMDExMDIucG5n?x-oss-process=image/format,png" alt="image-20200810001100498"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTAwMDE0MTUucG5n?x-oss-process=image/format,png" alt="image-20200810001413905"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTAwMDE1NDEucG5n?x-oss-process=image/format,png" alt="image-20200810001540158"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTAwMDE5NDQucG5n?x-oss-process=image/format,png" alt="image-20200810001941910"></p> 
<p>但是，如果你使用带有中文的别名查询会乱码，这是因为PLSQL Developer的字符集编码和Oracle不一样，那如何设置呢？首先查询Oracle数据库的字符集编码：select userenv(‘language’) from dual;</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTAxNDAyNDkucG5n?x-oss-process=image/format,png" alt="image-20200810140246508"></p> 
<h3><a name="t15"></a><a name="t15"></a><a id="28Oracle_218"></a>2.8、Oracle的体系结构</h3> 
<ul><li>数据库：Oracle是一种关系型的数据库管理系统</li><li>数据库实例：数据库实例其实就是用来访问和使用数据库的一块进程，它只存在于内存中，就像Java中new出来的实例对象一样</li><li>表空间：Oracle数据库是通过表空间来存储物理表的，一个数据库实例可以有N个表空间，一个表空间下可以有N张表</li><li>用户：Oracle数据库建好后，要想在数据库里建表，必须先为数据库建立用户，并为用户指定表空间</li></ul> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTAxMTMxMjIucG5n?x-oss-process=image/format,png" alt="image-20200810113120498"></p> 
<h3><a name="t16"></a><a name="t16"></a><a id="29Oracle_227"></a>2.9、Oracle的测试用户</h3> 
<p>scott测试用户下的表：</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTAxMTMzNTUucG5n?x-oss-process=image/format,png" alt="image-20200810113354715"></p> 
<p>hr测试用户下的表：</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTAxMTQ3MjQucG5n?x-oss-process=image/format,png" alt="image-20200810114722686"></p> 
<h2><a name="t17"></a><a name="t17"></a><a id="_DQL_237"></a>第三章 DQL语言</h2> 
<h3><a name="t18"></a><a name="t18"></a><a id="31_239"></a>3.1、完整语法</h3> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">select</span> <span class="token punctuation">[</span><span class="token keyword">TOP</span><span class="token operator">|</span><span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>选择列表<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">]</span>
<span class="token keyword">from</span> 数据源
<span class="token punctuation">[</span><span class="token keyword">where</span> 查询条件<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">group</span> <span class="token keyword">by</span> 分组条件<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">having</span> 过滤条件<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">order</span> <span class="token keyword">by</span> 排序条件 <span class="token keyword">asc</span><span class="token operator">|</span><span class="token keyword">desc</span> nulls <span class="token keyword">first</span><span class="token operator">|</span><span class="token keyword">last</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li></ul></pre> 
<p><strong>二、执行顺序</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">（<span class="token number">5</span>）<span class="token keyword">select</span> <span class="token punctuation">[</span>（<span class="token number">5</span><span class="token operator">-</span><span class="token number">3</span>）<span class="token keyword">TOP</span><span class="token operator">|</span>（<span class="token number">5</span><span class="token operator">-</span><span class="token number">2</span>）<span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> （<span class="token number">5</span><span class="token operator">-</span><span class="token number">1</span>）<span class="token punctuation">[</span>选择列表<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token operator">*</span><span class="token punctuation">]</span>
（<span class="token number">1</span>）<span class="token keyword">from</span> 数据源
（<span class="token number">2</span>）<span class="token punctuation">[</span><span class="token keyword">where</span> 查询条件<span class="token punctuation">]</span>
（<span class="token number">3</span>）<span class="token punctuation">[</span><span class="token keyword">group</span> <span class="token keyword">by</span> 分组条件<span class="token punctuation">]</span>
（<span class="token number">4</span>）<span class="token punctuation">[</span><span class="token keyword">having</span> 过滤条件<span class="token punctuation">]</span>
（<span class="token number">6</span>）<span class="token punctuation">[</span><span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token keyword">asc</span><span class="token operator">|</span><span class="token keyword">desc</span> nulls <span class="token keyword">first</span><span class="token operator">|</span><span class="token keyword">last</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li></ul></pre> 
<h3><a name="t19"></a><a name="t19"></a><a id="32_263"></a>3.2、简单查询</h3> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询所有员工的信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h3><a name="t20"></a><a name="t20"></a><a id="33_270"></a>3.3、别名查询</h3> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询所有员工的姓名</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>ename <span class="token keyword">from</span> emp e<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h3><a name="t21"></a><a name="t21"></a><a id="34_277"></a>3.4、去重查询</h3> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询所有部门的编号</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> e<span class="token punctuation">.</span>deptno <span class="token keyword">from</span> emp e<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h3><a name="t22"></a><a name="t22"></a><a id="35_284"></a>3.5、条件查询</h3> 
<p><strong>一、运算符</strong></p> 
<ol><li>条件运算符：&gt;、&gt;=、&lt;、&lt;=、=、&lt;=&gt;、!=、&lt;&gt;</li><li>逻辑运算符：and、or、not</li><li>模糊运算符： 
  <ul><li>like：%任意多个字符、_任意单个字符、如果有特殊字符，需要使用escape转义</li><li>between and</li><li>not between and</li><li>in</li><li>is null</li><li>is not null</li></ul> </li></ol> 
<p><strong>二、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询工资&gt;3000的员工信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">3000</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h3><a name="t23"></a><a name="t23"></a><a id="36_305"></a>3.6、分组查询</h3> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--统计每个部门有多少个人</span>
<span class="token keyword">select</span> deptno <span class="token keyword">as</span> <span class="token string">"部门"</span><span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">"人数"</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h3><a name="t24"></a><a name="t24"></a><a id="37_312"></a>3.7、分组过滤</h3> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--统计部门人数&gt;5人的部门的编号</span>
<span class="token keyword">select</span> deptno <span class="token keyword">as</span> <span class="token string">"部门"</span><span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">"人数"</span>
<span class="token keyword">from</span> emp
<span class="token keyword">group</span> <span class="token keyword">by</span> deptno
<span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">5</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li></ul></pre> 
<h3><a name="t25"></a><a name="t25"></a><a id="38_322"></a>3.8、排序查询</h3> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--按照员工主管编号由高到低进行排序，NULL值放到最后边</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> mgr <span class="token keyword">desc</span> nulls <span class="token keyword">last</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h3><a name="t26"></a><a name="t26"></a><a id="39_329"></a>3.9、分页查询</h3> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询前10条员工的信息</span>
<span class="token comment">--注意：Oracle中不支持limit，需要在原始表加上一列：行号，然后使用子查询来实现分页</span>
<span class="token keyword">select</span> <span class="token operator">*</span> 
<span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> rownum hanghao<span class="token punctuation">,</span>e<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> emp e<span class="token punctuation">)</span> t
<span class="token keyword">where</span> t<span class="token punctuation">.</span>hanghao <span class="token operator">&gt;=</span><span class="token number">1</span> <span class="token operator">and</span> t<span class="token punctuation">.</span>hanghao <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li></ul></pre> 
<h3><a name="t27"></a><a name="t27"></a><a id="310_339"></a>3.10、多表查询</h3> 
<ul><li><strong>内连接</strong> 
  <ul><li>隐式内连接：select * from emp e1, dept d1 where e1.deptno = d1.deptno;</li><li>显示内连接：select * from emp e1 inner join dept d1 on e1.deptno = d1.deptno;</li></ul> </li><li><strong>外连接</strong> 
  <ul><li>左外连接 
    <ul><li>隐式左外连接：select * from emp e1,dept d1 where e1.deptno = d1.deptno(+);</li><li>显示左外连接：select * from emp e1 left outer join dept d1 on e1.deptno = d1.deptno;</li></ul> </li><li>右外连接 
    <ul><li>隐式右外连接：select * from emp e1,dept d1 where e1.deptno(+) = d1.deptno;</li><li>显示右外连接：select * from emp e1 right outer join dept d1 on e1.deptno = d1.deptno;</li></ul> </li><li>全外连接：select * from emp e1 full outer join dept d1 on e1.deptno = d1.deptno;</li></ul> </li><li><strong>交叉连接</strong> 
  <ul><li>隐式交叉连接：select * from emp, dept;</li><li>显示交叉连接：select * from emp e1 cross join dept d1;</li></ul> </li></ul> 
<h3><a name="t28"></a><a name="t28"></a><a id="311_356"></a>3.11、联合查询</h3> 
<ul><li>并集运算：将两个查询结果进行合并</li></ul> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">/*
	union 		: 它会去除重复的，并且排序
	union all 	: 不会去除重复的，不会排序
*/</span>

<span class="token comment">--工资大于1500或者20号部门下的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">1500</span>
<span class="token keyword">union</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

<span class="token comment">--工资大于1500或者20号部门下的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">1500</span>
<span class="token keyword">union</span> <span class="token keyword">all</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li></ul></pre> 
<ul><li>交集运算：找两个查询结果的交集</li></ul> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--工资大于1500并且20号部门下的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">1500</span>
<span class="token keyword">intersect</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li></ul></pre> 
<ul><li>差集运算：找两个查询结果的差集</li></ul> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--1981年入职员工(不包括总裁和经理)</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> to_char<span class="token punctuation">(</span>hiredate<span class="token punctuation">,</span><span class="token string">'yyyy'</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">'1981'</span>
minus
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'PRESIDENT'</span> <span class="token operator">or</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li></ul></pre> 
<ul><li>注意事项：</li></ul> 
<ol><li>列的类型要一致</li><li>列的顺序要一致</li><li>列的数量要一致，如果不够，可以使用null填充</li></ol> 
<h3><a name="t29"></a><a name="t29"></a><a id="312_401"></a>3.12、子查询</h3> 
<ul><li>单行子查询：&gt;、&gt;=、&lt;、&lt;=、!=、&lt;&gt;、=、&lt;=&gt;</li><li>多行子查询：in、not in、any、some、all、exits</li></ul> 
<p>1、in的使用</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询所有经理的信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> mgr <span class="token keyword">from</span> emp <span class="token keyword">where</span> mgr <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p>2、not in的使用</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询不是经理的信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> mgr <span class="token keyword">from</span> emp <span class="token keyword">where</span> mgr <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p>3、any的使用</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询出比10号部门任意一个员工薪资高的员工信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token keyword">any</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p>4、some的使用</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询出比10号部门任意一个员工薪资高的员工信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token keyword">some</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p>5、all的使用</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询出比20号部门所有员工薪资高的员工信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token keyword">all</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p>6、exits的使用</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询有员工的部门的信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept d1 <span class="token keyword">where</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp e1 <span class="token keyword">where</span> e1<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d1<span class="token punctuation">.</span>deptno<span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h2><a name="t30"></a><a name="t30"></a><a id="__448"></a>第四章 函数大全</h2> 
<p>具体用法，请参考资料中的Oracle函数大全.chm</p> 
<h3><a name="t31"></a><a name="t31"></a><a id="41_452"></a>4.1、数值型函数</h3> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTEyMTUwMDYucG5n?x-oss-process=image/format,png" alt="image-20200811215005261"></p> 
<h3><a name="t32"></a><a name="t32"></a><a id="42_456"></a>4.2、字符型函数</h3> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTEyMTQzNDcucG5n?x-oss-process=image/format,png" alt="image-20200811214346432"></p> 
<h3><a name="t33"></a><a name="t33"></a><a id="43_460"></a>4.3、日期函数</h3> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTEyMTQ1MjYucG5n?x-oss-process=image/format,png" alt="image-20200811214525182"></p> 
<h3><a name="t34"></a><a name="t34"></a><a id="44_464"></a>4.4、转换函数</h3> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTEyMTQ2MTUucG5n?x-oss-process=image/format,png" alt="image-20200811214613660"></p> 
<h3><a name="t35"></a><a name="t35"></a><a id="45_468"></a>4.5、聚组函数</h3> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTEyMTQ2NTgucG5n?x-oss-process=image/format,png" alt="image-20200811214657196"></p> 
<h3><a name="t36"></a><a name="t36"></a><a id="46_472"></a>4.6、分析函数</h3> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTEyMTQ3NDcucG5n?x-oss-process=image/format,png" alt="image-20200811214745948"></p> 
<h3><a name="t37"></a><a name="t37"></a><a id="47_476"></a>4.7、其它函数</h3> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MTEyMTQ5MDUucG5n?x-oss-process=image/format,png" alt="image-20200811214904301"></p> 
<h2><a name="t38"></a><a name="t38"></a><a id="_DCL_480"></a>第五章 DCL语言</h2> 
<h3><a name="t39"></a><a name="t39"></a><a id="51_482"></a>5.1、创建表空间</h3> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token keyword">tablespace</span> 表空间的名称
datafile <span class="token string">'文件的路径'</span>
size 初始化大小
autoextend <span class="token keyword">on</span>
<span class="token keyword">next</span> 每次扩展的大小<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li></ul></pre> 
<p><strong>二、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token keyword">tablespace</span> mytest
datafile <span class="token string">'d:/mytest.dbf'</span>
size <span class="token number">100</span>m
autoextend <span class="token keyword">on</span>
<span class="token keyword">next</span> <span class="token number">10</span>m<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li></ul></pre> 
<h3><a name="t40"></a><a name="t40"></a><a id="52_504"></a>5.2、删除表空间</h3> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">drop</span> <span class="token keyword">tablespace</span> 表空间的名称<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p><strong>二、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">drop</span> <span class="token keyword">tablespace</span> mytest<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<h3><a name="t41"></a><a name="t41"></a><a id="53_518"></a>5.3、创建用户</h3> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token keyword">user</span> 用户名
identified <span class="token keyword">by</span> 密码
<span class="token keyword">default</span> <span class="token keyword">tablespace</span> 表空间的名称<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li></ul></pre> 
<p><strong>二、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token keyword">user</span> zhangsan
identified <span class="token keyword">by</span> <span class="token number">123456</span>
<span class="token keyword">default</span> <span class="token keyword">tablespace</span> mytest<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li></ul></pre> 
<h3><a name="t42"></a><a name="t42"></a><a id="54_536"></a>5.4、删除用户</h3> 
<h3><a name="t43"></a><a name="t43"></a><a id="55_538"></a>5.5、授权用户</h3> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">grant</span> 系统权限列表 <span class="token keyword">to</span> 用户名<span class="token punctuation">;</span>
或者
<span class="token keyword">grant</span> 实体权限列表 <span class="token keyword">on</span> 表名称 <span class="token keyword">to</span> 用户名<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li></ul></pre> 
<p><strong>二、权限列表</strong></p> 
<p>系统权限分类：（系统权限只能由DBA用户授出）</p> 
<ul><li>DBA：拥有全部特权，是系统最高权限，只有DBA才可以创建数据库结构。</li><li>RESOURCE：拥有Resource权限的用户只可以创建实体，不可以创建数据库结构。</li><li>CONNECT：拥有Connect权限的用户只可以登录Oracle，不可以创建实体，不可以创建数据库结构。</li></ul> 
<p>实体权限分类：select、update、insert、alter、index、delete、all</p> 
<p><strong>三、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">grant</span> <span class="token keyword">CONNECT</span> <span class="token keyword">to</span> zhangsan<span class="token punctuation">;</span>
或者
<span class="token keyword">grant</span> <span class="token keyword">CONNECT</span><span class="token punctuation">,</span>RESOURCE <span class="token keyword">to</span> zhangsan<span class="token punctuation">;</span>
或者
<span class="token keyword">grant</span> <span class="token keyword">CONNECT</span><span class="token punctuation">,</span>RESOURCE<span class="token punctuation">,</span>DBA <span class="token keyword">to</span> zhangsan<span class="token punctuation">;</span>
或者
<span class="token keyword">grant</span> DBA <span class="token keyword">to</span> zhangsan<span class="token punctuation">;</span>
或者
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> emp <span class="token keyword">to</span> zhangsan<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li></ul></pre> 
<h3><a name="t44"></a><a name="t44"></a><a id="56_572"></a>5.6、取消授权</h3> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">revoke</span> 系统权限列表 <span class="token keyword">from</span> 用户名<span class="token punctuation">;</span>
或者
<span class="token keyword">revoke</span> 实体权限列表 <span class="token keyword">on</span> 表名称 <span class="token keyword">from</span> 用户名<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li></ul></pre> 
<p><strong>二、注意事项</strong></p> 
<p>系统权限只能由DBA用户回收</p> 
<p><strong>二、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">revoke</span> <span class="token keyword">CONNECT</span> <span class="token keyword">from</span> zhangsan<span class="token punctuation">;</span>
或者
<span class="token keyword">revoke</span> <span class="token keyword">CONNECT</span><span class="token punctuation">,</span>RESOURCE <span class="token keyword">from</span> zhangsan<span class="token punctuation">;</span>
或者
<span class="token keyword">revoke</span> <span class="token keyword">CONNECT</span><span class="token punctuation">,</span>RESOURCE<span class="token punctuation">,</span>DBA <span class="token keyword">from</span> zhangsan<span class="token punctuation">;</span>
或者
<span class="token keyword">revoke</span> DBA <span class="token keyword">from</span> zhangsan<span class="token punctuation">;</span>
或者
<span class="token keyword">revoke</span> <span class="token keyword">all</span> <span class="token keyword">on</span> emp <span class="token keyword">from</span> zhangsan<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li></ul></pre> 
<h3><a name="t45"></a><a name="t45"></a><a id="57_600"></a>5.7、修改密码</h3> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">alter</span> <span class="token keyword">user</span> 用户名 identified <span class="token keyword">by</span> <span class="token string">"密码"</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p><strong>二、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">alter</span> <span class="token keyword">user</span> zhangsan identified <span class="token keyword">by</span> <span class="token string">"123456"</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<h2><a name="t46"></a><a name="t46"></a><a id="_DDL_614"></a>第六章 DDL语言</h2> 
<h3><a name="t47"></a><a name="t47"></a><a id="61_616"></a>6.1、数据类型</h3> 
<p>注意：这里整理的都是常用的并没有全部整理出所有类型</p> 
<ul><li><strong>字符串类型</strong> 
  <ul><li>CHAR：定长字符串，它会用空格填充来达到其最大长度，最多可以存储2000字节的信息</li><li>NCHAR：这是一个包含UNICODE格式数据的定长字符串，最多可以存储2000字节的信息</li><li>VARCHAR2：变长字符串，它不会用空格填充来达到其最大长度，最多可以存储4000字节的信息</li><li>NVARCHAR2：这是一个包含UNICODE格式数据的变长字符串，最多可以存储4000字节的信息</li></ul> </li><li><strong>数值类型</strong> 
  <ul><li>NUMBER：NUMBER(p,s)是最常见的数字类型，关于NUMBER的有效位§和精确位(s)遵循以下规则： 
    <ul><li>p：是有效数据总位数，取值范围为【1-38】，默认值是38</li><li>s：表示精确到多少位，取值范围为【-84-127】，默认值是0</li></ul> </li><li>INTEGER：INTEGER是NUMBER的子类型，它等同于NUMBER(38,0)，用来存储整数</li><li>FLOAT：Float(n)是NUMBER的子类型，数 n 指示位的精度，n值的范围可以从1到126</li></ul> </li><li><strong>日期类型</strong> 
  <ul><li>DATE：DATE是最常用的日期数据类型，它可以存储日期和时间信息，虽然可以用字符或数字类型表示日期和时间信息，但是日期数据类型具有特殊关联的属性。Oracle 为每个日期值存储以下信息： 世纪、 年、 月、 日期、 小时、 分钟和秒，一般占用7个字节的存储空间</li><li>TIMESTAMP：这是一个7字节或12字节的定宽日期/时间数据类型。它与DATE数据类型不同，因为TIMESTAMP可以包含小数秒，带小数秒的TIMESTAMP在小数点右边最多可以保留9位</li></ul> </li></ul> 
<h3><a name="t48"></a><a name="t48"></a><a id="62_635"></a>6.2、创建表</h3> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
     列名 列的类型 <span class="token punctuation">[</span>列的约束<span class="token punctuation">]</span><span class="token punctuation">,</span>
     列名 列的类型 <span class="token punctuation">[</span>列的约束<span class="token punctuation">]</span>  
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li></ul></pre> 
<p><strong>二、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token keyword">table</span> users<span class="token punctuation">(</span>
     id number<span class="token punctuation">,</span>
     username varchar2<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     password varchar2<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li></ul></pre> 
<h3><a name="t49"></a><a name="t49"></a><a id="63_656"></a>6.3、复制表</h3> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token keyword">table</span> 表名 <span class="token keyword">as</span> 查询语句<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p><strong>二、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token keyword">table</span> emp_copy <span class="token keyword">as</span> 
     <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp
<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li></ul></pre> 
<h3><a name="t50"></a><a name="t50"></a><a id="64_672"></a>6.4、删除表</h3> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">方式一：<span class="token keyword">drop</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span>
方式二：<span class="token keyword">truncate</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p><strong>二、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">方式一：<span class="token keyword">drop</span> <span class="token keyword">table</span> emp_copy<span class="token punctuation">;</span>
方式二：<span class="token keyword">truncate</span> <span class="token keyword">table</span> emp_copy<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h3><a name="t51"></a><a name="t51"></a><a id="65_688"></a>6.5、修改表</h3> 
<p>1、添加一列</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">格式：<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> 列名 列的类型<span class="token punctuation">;</span>
演示：<span class="token keyword">alter</span> <span class="token keyword">table</span> users <span class="token keyword">add</span> phone varchar2<span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p>2、修改列名</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">格式：<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">rename</span> <span class="token keyword">column</span> 旧列名 <span class="token keyword">to</span> 新列名<span class="token punctuation">;</span>
演示：<span class="token keyword">alter</span> <span class="token keyword">table</span> users <span class="token keyword">rename</span> <span class="token keyword">column</span> phone <span class="token keyword">to</span> mobile<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p>3、修改类型</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">格式：<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> 列名 列的类型<span class="token punctuation">;</span>
演示：<span class="token keyword">alter</span> <span class="token keyword">table</span> users <span class="token keyword">modify</span> mobile <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p>4、删除一列</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">格式：<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">column</span> 列名<span class="token punctuation">;</span>
演示：<span class="token keyword">alter</span> <span class="token keyword">table</span> users <span class="token keyword">drop</span> <span class="token keyword">column</span> mobile<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p>5、修改表名</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">格式：<span class="token keyword">rename</span> 旧表名 <span class="token keyword">to</span> 新表名<span class="token punctuation">;</span>
演示：<span class="token keyword">rename</span> users <span class="token keyword">to</span> myusers<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h3><a name="t52"></a><a name="t52"></a><a id="66_725"></a>6.6、表约束</h3> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>
        列名 列的类型 <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span><span class="token comment">--主键约束</span>
        列名 列的类型 <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--非空约束</span>
        列名 列的类型 <span class="token keyword">unique</span><span class="token punctuation">,</span><span class="token comment">--唯一约束</span>
    	列名 列的类型 <span class="token keyword">check</span><span class="token punctuation">(</span>列名 <span class="token operator">in</span> <span class="token punctuation">(</span>检查列表<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">--检查约束</span>
        <span class="token keyword">constraint</span> 约束名 <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>字段名<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表<span class="token punctuation">(</span>被引用列<span class="token punctuation">)</span><span class="token comment">--外键约束</span>
<span class="token punctuation">)</span> <span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li></ul></pre> 
<p><strong>二、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--商品分类表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> category<span class="token punctuation">(</span>
       cid number <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
       cname varchar2<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> 
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--商品详情表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> product<span class="token punctuation">(</span>
       pid number <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span><span class="token comment">--主键约束</span>
       pname varchar2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--非空约束</span>
       pimg varchar2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">,</span><span class="token comment">--唯一约束</span>
       pflag varchar2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">check</span><span class="token punctuation">(</span>pflag <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token string">'上架'</span><span class="token punctuation">,</span><span class="token string">'下架'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">--检查约束</span>
       cid number<span class="token punctuation">,</span>
       <span class="token keyword">constraint</span> FK_CATEGORY_ID <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>cid<span class="token punctuation">)</span> <span class="token keyword">references</span> category<span class="token punctuation">(</span>cid<span class="token punctuation">)</span><span class="token comment">--外键约束</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li></ul></pre> 
<p><strong>三、修改</strong></p> 
<p>1、主键约束</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">添加
<span class="token keyword">alter</span> <span class="token keyword">table</span> product <span class="token keyword">add</span> <span class="token keyword">constraint</span> PK_PRODUCT_PID <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>pid<span class="token punctuation">)</span><span class="token punctuation">;</span>
删除
<span class="token keyword">alter</span> <span class="token keyword">table</span> product <span class="token keyword">drop</span> <span class="token keyword">constraint</span> PK_PRODUCT_PID<span class="token punctuation">;</span>
或者
<span class="token keyword">alter</span> <span class="token keyword">table</span> product <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li></ul></pre> 
<p>2、非空约束</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">添加
<span class="token keyword">alter</span> <span class="token keyword">table</span> product <span class="token keyword">modify</span> pname <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
删除
<span class="token keyword">alter</span> <span class="token keyword">table</span> product <span class="token keyword">modify</span> pname <span class="token boolean">null</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li></ul></pre> 
<p>3、唯一约束</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">添加
<span class="token keyword">alter</span> <span class="token keyword">table</span> product <span class="token keyword">add</span> <span class="token keyword">constraint</span> UK_PRODUCT_PIMG <span class="token keyword">unique</span><span class="token punctuation">(</span>pimg<span class="token punctuation">)</span><span class="token punctuation">;</span>
删除
<span class="token keyword">alter</span> <span class="token keyword">table</span> product <span class="token keyword">drop</span> <span class="token keyword">constraint</span> UK_PRODUCT_PIMG<span class="token punctuation">;</span>
或者
<span class="token keyword">alter</span> <span class="token keyword">table</span> product <span class="token keyword">drop</span> <span class="token keyword">unique</span><span class="token punctuation">(</span>pimg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li></ul></pre> 
<p>4、检查约束</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">添加
<span class="token keyword">alter</span> <span class="token keyword">table</span> product <span class="token keyword">add</span> <span class="token keyword">constraint</span> CK_PRODUCT_PFLAG <span class="token keyword">check</span><span class="token punctuation">(</span>pflag <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token string">'上架'</span><span class="token punctuation">,</span><span class="token string">'下架'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
删除
<span class="token keyword">alter</span> <span class="token keyword">table</span> product <span class="token keyword">drop</span> <span class="token keyword">constraint</span> CK_PRODUCT_PFLAG<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li></ul></pre> 
<p>5、外键约束</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">添加
<span class="token keyword">alter</span> <span class="token keyword">table</span> product <span class="token keyword">add</span> <span class="token keyword">constraint</span> FK_PRODUCT_ID <span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>cid<span class="token punctuation">)</span> <span class="token keyword">references</span> category<span class="token punctuation">(</span>cid<span class="token punctuation">)</span><span class="token punctuation">;</span>
删除
<span class="token keyword">alter</span> <span class="token keyword">table</span> product <span class="token keyword">drop</span> <span class="token keyword">constraint</span> FK_PRODUCT_ID<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li></ul></pre> 
<h2><a name="t53"></a><a name="t53"></a><a id="_DML_810"></a>第七章 DML语言</h2> 
<h3><a name="t54"></a><a name="t54"></a><a id="71_812"></a>7.1、插入语句</h3> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">格式：<span class="token keyword">insert</span> <span class="token keyword">into</span> 表名<span class="token punctuation">(</span>列名<span class="token number">1</span><span class="token punctuation">,</span>列名<span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
演示：<span class="token keyword">insert</span> <span class="token keyword">into</span> category<span class="token punctuation">(</span>cid<span class="token punctuation">,</span>cname<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'电视'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
注意：<span class="token keyword">commit</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li></ul></pre> 
<h3><a name="t55"></a><a name="t55"></a><a id="72_820"></a>7.2、修改语句</h3> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">格式：<span class="token keyword">update</span> 表名 <span class="token keyword">set</span> 列名<span class="token number">1</span><span class="token operator">=</span>值<span class="token number">1</span><span class="token punctuation">,</span>列名<span class="token number">2</span><span class="token operator">=</span>值<span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">where</span> 查询条件<span class="token punctuation">;</span>
演示：<span class="token keyword">update</span> category <span class="token keyword">set</span> cname<span class="token operator">=</span><span class="token string">'汽车'</span> <span class="token keyword">where</span> cid <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
注意：<span class="token keyword">commit</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li></ul></pre> 
<h3><a name="t56"></a><a name="t56"></a><a id="73_828"></a>7.3、删除语句</h3> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">格式：<span class="token keyword">delete</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 查询条件<span class="token punctuation">;</span>
演示：<span class="token keyword">delete</span> <span class="token keyword">from</span> category <span class="token keyword">where</span> cid <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
注意：<span class="token keyword">commit</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li></ul></pre> 
<h2><a name="t57"></a><a name="t57"></a><a id="_TCL_836"></a>第八章 TCL语言</h2> 
<h3><a name="t58"></a><a name="t58"></a><a id="81_838"></a>8.1、事务</h3> 
<p><strong>一、含义</strong></p> 
<p>一条或多条sql语句组成一个执行单位，一组sql语句要么都执行要么都不执行</p> 
<p><strong>二、特点（ACID）</strong></p> 
<ol><li>原子性：一个事务是不可再分割的整体，要么都执行要么都不执行</li><li>一致性：一个事务的执行不能破坏数据库数据的完整性和一致性</li><li>隔离性：一个事务不受其它事务的干扰，多个事务是互相隔离的</li><li>持久性：一个事务一旦提交了，则永久的持久化到本地</li></ol> 
<p><strong>三、分类</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token number">1</span>、开启事务
Oracle <span class="token number">11</span>g中事务是隐式自动开始的，它不需要用户显示的执行开始事务语句

<span class="token number">2</span>、编写一组逻辑<span class="token keyword">sql</span>语句
注意：<span class="token keyword">sql</span>语句支持的是<span class="token keyword">insert</span>、<span class="token keyword">update</span>、<span class="token keyword">delete</span>

【设置回滚点】
<span class="token keyword">savepoint</span> 回滚点名<span class="token punctuation">;</span>

<span class="token number">3</span>、结束事务
提交：<span class="token keyword">commit</span><span class="token punctuation">;</span>
回滚：<span class="token keyword">rollback</span><span class="token punctuation">;</span>
回滚到指定的地方： <span class="token keyword">rollback</span> <span class="token keyword">to</span> 回滚点名<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li></ul></pre> 
<h3><a name="t59"></a><a name="t59"></a><a id="82_869"></a>8.2、事务并发（读问题）</h3> 
<p><strong>一、事物的并发问题如何发生？</strong></p> 
<p>多个事务同时操作同一个数据库的相同数据时</p> 
<p><strong>二、事务的并发问题都有哪些？</strong></p> 
<ol><li>脏读：一个事务读到了另一个事务还未提交的update数据，导致多次查询的结果不一样（Oracle中不会产生）</li><li>不可重复读：一个事务读到了另一个事务已经提交的update数据，导致多次查询结果不一致</li><li>幻读：一个事务读到了另一个事务已经提交的insert数据，导致多次查询的结果不一样</li></ol> 
<p><strong>三、事物的并发问题如何解决？</strong></p> 
<p>通过设置隔离级别来解决并发问题</p> 
<p><strong>四、隔离级别</strong></p> 
<p>Oracle中只支持READ COMMITTED、SERIALIZABLE、READ ONLY、READ WRITE，这些语句是互斥的，不能同时设置两个或两个以上的选项，一般默认即可。</p> 
<h3><a name="t60"></a><a name="t60"></a><a id="83_889"></a>8.3、丢失更新（写问题）</h3> 
<p><strong>一、定义</strong></p> 
<p>在事务的隔离级别内容中，能够了解到两个不同的事务在并发的时候可能会发生数据的影响。细心的话可以发现事务隔离级别章节中，脏读、不可重复读、幻读三个问题都是由事务A对数据进行修改、增加，事务B总是在做读操作。如果两事务都在对数据进行修改则会导致另外的问题：丢失更新。</p> 
<p><strong>二、解决</strong></p> 
<ol><li>悲观锁：认为两个事务更新操作一定会发生丢失更新 
  <ul><li>解决：通过在语句后边添加for update来实现行级上锁，所以又称为“行级锁”，例如：select * from t_account t wheret.id=‘1’ for update;</li></ul> </li><li>乐观锁：认为事务不一定会产生丢失更新，让事务进行并发修改，不对事务进行锁定 
  <ul><li>解决：由程序员自己解决，可以通过给数据表添加自增的version字段或时间戳timestamp，进行数据修改时，数据库会检测version字段或者时间戳是否与原来的一致，若不一致，抛出异常或者重新查询</li></ul> </li></ol> 
<p><strong>三、注意</strong></p> 
<p>对于账户交易建议直接使用悲观锁，数据库的性能很高，并发度不是很高的场景两者性能没有太大差别。如果是交易减库存的操作可以考虑乐观锁，保证并发度。</p> 
<h2><a name="t61"></a><a name="t61"></a><a id="__906"></a>第九章 高级部分</h2> 
<h3><a name="t62"></a><a name="t62"></a><a id="91_908"></a>9.1、序列</h3> 
<p><strong>一、含义</strong></p> 
<p>序列是Oracle数据库中特有的，使用序列可以生成类似于 auto_increment 这种ID自动增长 1,2,3,4,5… 的效果</p> 
<p><strong>二、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> sequence 序列名称
<span class="token keyword">start</span> <span class="token keyword">with</span> 从几开始
increment <span class="token keyword">by</span> 每次增长多少
<span class="token punctuation">[</span>maxvalue 最大值<span class="token punctuation">]</span> <span class="token operator">|</span> nomaxvalue
<span class="token punctuation">[</span>minvalue 最小值<span class="token punctuation">]</span> <span class="token operator">|</span> nominvalue
<span class="token keyword">cycle</span> <span class="token operator">|</span> nocycle <span class="token comment">--是否自动循环</span>
<span class="token punctuation">[</span>cache 缓存数量<span class="token punctuation">]</span> <span class="token operator">|</span> nocache<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li></ul></pre> 
<p><strong>三、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--创建序列</span>
<span class="token keyword">create</span> sequence auto_increment_seq
<span class="token keyword">start</span> <span class="token keyword">with</span> <span class="token number">1</span>
increment <span class="token keyword">by</span> <span class="token number">1</span>
nomaxvalue
minvalue <span class="token number">1</span>
nocycle
cache <span class="token number">10000</span><span class="token punctuation">;</span>

<span class="token comment">--调用序列</span>
<span class="token keyword">select</span> auto_increment_seq<span class="token punctuation">.</span>nextval <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
<span class="token keyword">select</span> auto_increment_seq<span class="token punctuation">.</span>currval <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li></ul></pre> 
<h3><a name="t63"></a><a name="t63"></a><a id="92PLSQL_943"></a>9.2、PLSQL编程</h3> 
<h4><a id="921_945"></a>9.2.1、格式</h4> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">declare</span>
  <span class="token comment">--声明变量</span>
          
<span class="token keyword">begin</span>
  <span class="token comment">--业务逻辑</span>

<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li></ul></pre> 
<h4><a id="922_957"></a>9.2.2、变量</h4> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">declare</span>
  <span class="token comment">--声明变量</span>
  <span class="token comment">-- 格式一：变量名 变量类型;</span>
  <span class="token comment">-- 格式二：变量名 变量类型 := 初始值;</span>
  <span class="token comment">-- 格式三：变量名 变量类型 := &amp;文本框名;</span>
  <span class="token comment">-- 格式四：变量名 表名.字段名%type;</span>
  <span class="token comment">-- 格式五：变量名 表名%rowtype;</span>
  vnum number<span class="token punctuation">;</span>
  vage number :<span class="token operator">=</span> <span class="token number">28</span><span class="token punctuation">;</span>
  vabc number :<span class="token operator">=</span> <span class="token operator">&amp;</span>abc<span class="token punctuation">;</span><span class="token comment">--输入一个数值，从一个文本框输入</span>
  vsal emp<span class="token punctuation">.</span>sal<span class="token operator">%</span><span class="token keyword">type</span><span class="token punctuation">;</span>  <span class="token comment">--引用型的变量，代表emp.sal的类型</span>
  vrow emp<span class="token operator">%</span>rowtype<span class="token punctuation">;</span>   <span class="token comment">--记录型的变量，代表emp一行的类型          </span>
<span class="token keyword">begin</span>
  <span class="token comment">--业务逻辑</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span>vnum<span class="token punctuation">)</span><span class="token punctuation">;</span>                       <span class="token comment">--输出一个未赋值的变量</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span>vage<span class="token punctuation">)</span><span class="token punctuation">;</span>                       <span class="token comment">--输出一个已赋值的变量</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span>vabc<span class="token punctuation">)</span><span class="token punctuation">;</span>                       <span class="token comment">--输出一个文本框输入的变量</span>
  <span class="token keyword">select</span> sal <span class="token keyword">into</span> vsal <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">7654</span><span class="token punctuation">;</span> <span class="token comment">--将查询到的sal内容存入vsal并输出</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span>vsal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">into</span> vrow <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">7654</span><span class="token punctuation">;</span>   <span class="token comment">--将查询到的一行内容存入vrow并输出  </span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span>vrow<span class="token punctuation">.</span>sal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                        <span class="token comment">--输出一个整数</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token number">123.456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">--输出一个小数  </span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'Hello,World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>              <span class="token comment">--输出一个字符串</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token operator">||</span><span class="token string">',World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">--输出一个拼接的字符串，||拼接符Oracle特有</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span>concat<span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">,</span><span class="token string">',World'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">--输出一个拼接的字符串，concat函数比较通用</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li><li style="color: rgb(153, 153, 153);">19</li><li style="color: rgb(153, 153, 153);">20</li><li style="color: rgb(153, 153, 153);">21</li><li style="color: rgb(153, 153, 153);">22</li><li style="color: rgb(153, 153, 153);">23</li><li style="color: rgb(153, 153, 153);">24</li><li style="color: rgb(153, 153, 153);">25</li><li style="color: rgb(153, 153, 153);">26</li><li style="color: rgb(153, 153, 153);">27</li></ul></pre> 
<h4><a id="923if_989"></a>9.2.3、if判断</h4> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">if</span> 条件<span class="token number">1</span> <span class="token keyword">then</span>
     
elsif 条件<span class="token number">2</span> <span class="token keyword">then</span>
       
<span class="token keyword">else</span> 
     
<span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li></ul></pre> 
<p><strong>二、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">declare</span>
  age number :<span class="token operator">=</span> <span class="token operator">&amp;</span>age<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  <span class="token keyword">if</span> age <span class="token operator">&lt;</span> <span class="token number">18</span> <span class="token keyword">then</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'小屁孩'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  elsif age <span class="token operator">&gt;=</span> <span class="token number">18</span> <span class="token operator">and</span> age <span class="token operator">&lt;=</span> <span class="token number">24</span> <span class="token keyword">then</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'年轻人'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  elsif age <span class="token operator">&gt;</span> <span class="token number">24</span> <span class="token operator">and</span> age <span class="token operator">&lt;</span> <span class="token number">40</span> <span class="token keyword">then</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'老司机'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'老年人'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li></ul></pre> 
<h4><a id="924while_1021"></a>9.2.4、while循环</h4> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">while</span> 条件 <span class="token keyword">loop</span>
        
<span class="token keyword">end</span> <span class="token keyword">loop</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li></ul></pre> 
<p><strong>二、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--输出1~10</span>
<span class="token keyword">declare</span>
  i number :<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  <span class="token keyword">while</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span> <span class="token keyword">loop</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    i :<span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">end</span> <span class="token keyword">loop</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li></ul></pre> 
<h4><a id="925for_1045"></a>9.2.5、for循环</h4> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">for</span> 变量  <span class="token operator">in</span> <span class="token punctuation">[</span>reverse<span class="token punctuation">]</span> 起始值<span class="token punctuation">.</span><span class="token punctuation">.</span>结束值 <span class="token keyword">loop</span>
        
<span class="token keyword">end</span> <span class="token keyword">loop</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li></ul></pre> 
<p><strong>二、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--输出1~10</span>
<span class="token keyword">declare</span>

<span class="token keyword">begin</span>
  <span class="token keyword">for</span> i <span class="token operator">in</span> reverse <span class="token number">1</span> <span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token number">10</span> <span class="token keyword">loop</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">end</span> <span class="token keyword">loop</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li></ul></pre> 
<h4><a id="926loop_1068"></a>9.2.6、loop循环</h4> 
<p><strong>一、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">loop</span>
  
  <span class="token keyword">exit</span> <span class="token keyword">when</span> 条件
  
<span class="token keyword">end</span> <span class="token keyword">loop</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li></ul></pre> 
<p><strong>二、演示</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--输出1~10</span>
<span class="token keyword">declare</span>
  i number :<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  <span class="token keyword">loop</span>
    <span class="token keyword">exit</span> <span class="token keyword">when</span> i <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">;</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    i :<span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">end</span> <span class="token keyword">loop</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li></ul></pre> 
<h4><a id="927_1095"></a>9.2.7、意外</h4> 
<p><strong>一、含义</strong></p> 
<p>意外是程序运行的过程发生的异常，相当于是Java中的异常</p> 
<p><strong>二、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">declare</span>
   <span class="token comment">--声明变量</span>
<span class="token keyword">begin</span>
   <span class="token comment">--业务逻辑</span>
exception
   <span class="token comment">--处理异常</span>
   <span class="token keyword">when</span> 异常<span class="token number">1</span> <span class="token keyword">then</span>
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
   <span class="token keyword">when</span> 异常<span class="token number">2</span> <span class="token keyword">then</span>
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
   <span class="token keyword">when</span> others <span class="token keyword">then</span>
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>处理其它异常
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li></ul></pre> 
<p><strong>三、分类</strong></p> 
<ul><li> <p>系统异常</p> 
  <ul><li>zero_divide ：除数为零异常</li><li>value_error ：类型转换异常</li><li>no_data_found : 没有找到数据</li><li>too_many_rows : 查询出多行记录，但是赋值给了%rowtype一行数据变量</li></ul> </li><li> <p>自定义异常</p> 
  <ul><li> <pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">declare</span>
   <span class="token comment">--声明变量</span>
   异常名称 exception<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
   <span class="token comment">--业务逻辑</span>
   <span class="token keyword">if</span> 触发条件 <span class="token keyword">then</span>
      raise 异常名称<span class="token punctuation">;</span> <span class="token comment">--抛出自定义的异常</span>
exception
   <span class="token comment">--处理异常</span>
   <span class="token keyword">when</span> 异常名称 <span class="token keyword">then</span>
     dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'输出了自定义异常'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
   <span class="token keyword">when</span> others <span class="token keyword">then</span>
     dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'输出了其它的异常'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li></ul></pre> </li></ul> </li></ul> 
<p><strong>四、演示</strong></p> 
<p>1、内置系统异常</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">  vi   number<span class="token punctuation">;</span>
  vrow emp<span class="token operator">%</span>rowtype<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  <span class="token comment">--以下四行对应四个异常，测试请依次放开</span>
  vi :<span class="token operator">=</span> <span class="token number">8</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">;</span>  
  <span class="token comment">--vi := 'aaa';</span>
  <span class="token comment">--select * into vrow from emp where empno = 1234567;</span>
  <span class="token comment">--select * into vrow from emp;</span>
exception
  <span class="token keyword">when</span> zero_divide <span class="token keyword">then</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'发生除数为零异常'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">when</span> value_error <span class="token keyword">then</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'发生类型转换异常'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">when</span> no_data_found <span class="token keyword">then</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'没有找到数据异常'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">when</span> too_many_rows <span class="token keyword">then</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'查询出多行记录，但是赋值给了%rowtype一行数据变量'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">when</span> others <span class="token keyword">then</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'发生了其它的异常'</span> <span class="token operator">||</span> sqlerrm<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li><li style="color: rgb(153, 153, 153);">19</li><li style="color: rgb(153, 153, 153);">20</li></ul></pre> 
<p>2、抛出系统异常</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询指定编号的员工，如果没有找到，则抛出系统异常</span>
<span class="token keyword">declare</span>
  <span class="token comment">--1.声明一个变量 %rowtype</span>
  vrow emp<span class="token operator">%</span>rowtype<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  <span class="token comment">--查询员工信息，保存起来</span>
  <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">into</span> vrow <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">8000</span><span class="token punctuation">;</span>
  <span class="token comment">--判断是否触发异常的条件</span>
  <span class="token keyword">if</span> vrow<span class="token punctuation">.</span>sal <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token keyword">then</span>
    <span class="token comment">--抛出系统异常</span>
     raise_application_error<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20001</span><span class="token punctuation">,</span><span class="token string">'员工工资为空'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>
exception
  <span class="token keyword">when</span> others <span class="token keyword">then</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'输出了其它的异常'</span> <span class="token operator">||</span> sqlerrm<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li></ul></pre> 
<p>3、抛出自定义异常</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询指定编号的员工，如果没有找到，则抛出自定义异常</span>
<span class="token keyword">declare</span>
  <span class="token comment">--1.声明一个变量 %rowtype</span>
  vrow emp<span class="token operator">%</span>rowtype<span class="token punctuation">;</span>
  <span class="token comment">--2.声明一个自定义的异常</span>
  no_emp exception<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  <span class="token comment">--查询员工信息，保存起来</span>
  <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">into</span> vrow <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">8000</span><span class="token punctuation">;</span>
  <span class="token comment">--判断是否触发异常的条件</span>
  <span class="token keyword">if</span> vrow<span class="token punctuation">.</span>sal <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token keyword">then</span>
    raise no_emp<span class="token punctuation">;</span> <span class="token comment">--抛出自定义的异常</span>
  <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>
exception
  <span class="token keyword">when</span> no_emp <span class="token keyword">then</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'输出了自定义异常'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">when</span> others <span class="token keyword">then</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'输出了其它的异常'</span> <span class="token operator">||</span> sqlerrm<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li><li style="color: rgb(153, 153, 153);">19</li></ul></pre> 
<h3><a name="t64"></a><a name="t64"></a><a id="93_1219"></a>9.3、索引</h3> 
<p><strong>一、含义</strong></p> 
<p>索引相当于是一本书的目录，能够提高我们的查询效率</p> 
<p><strong>二、语法</strong></p> 
<p>1、创建索引</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token punctuation">[</span><span class="token keyword">UNIQUE</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span>BITMAP<span class="token punctuation">]</span> <span class="token keyword">index</span> 索引名 <span class="token keyword">on</span> 表名<span class="token punctuation">(</span>列名<span class="token number">1</span><span class="token punctuation">,</span>列名<span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p>2、修改索引</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--重命名索引</span>
<span class="token keyword">alter</span> <span class="token keyword">index</span> 索引名称 <span class="token keyword">rename</span> <span class="token keyword">to</span> 新的名称<span class="token punctuation">;</span>

<span class="token comment">--合并索引</span>
<span class="token keyword">alter</span> <span class="token keyword">index</span> 索引名称 <span class="token keyword">coalesce</span><span class="token punctuation">;</span>

<span class="token comment">--重建索引</span>
<span class="token keyword">alter</span> <span class="token keyword">index</span> 索引名称 rebuild<span class="token punctuation">;</span>

<span class="token comment">--修改某列</span>
先删除，在创建
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li></ul></pre> 
<p>3、删除索引</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">drop</span> <span class="token keyword">index</span> 索引名称<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p><strong>三、演示</strong></p> 
<p>1、创建索引</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token keyword">index</span> INX_CATEGORY_CNAME <span class="token keyword">on</span> category<span class="token punctuation">(</span>cname<span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p>2、修改索引</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--重命名索引</span>
<span class="token keyword">alter</span> <span class="token keyword">index</span> INX_CATEGORY_CNAME <span class="token keyword">rename</span> <span class="token keyword">to</span> INX_CATEGORY_CNAME_NEW<span class="token punctuation">;</span>

<span class="token comment">--合并索引</span>
<span class="token keyword">alter</span> <span class="token keyword">index</span> INX_CATEGORY_CNAME_NEW <span class="token keyword">coalesce</span><span class="token punctuation">;</span>

<span class="token comment">--重建索引</span>
<span class="token keyword">alter</span> <span class="token keyword">index</span> INX_CATEGORY_CNAME_NEW rebuild<span class="token punctuation">;</span>

<span class="token comment">--修改某列</span>
先删除，在创建
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li></ul></pre> 
<p>3、删除索引</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">drop</span> <span class="token keyword">index</span> INX_CATEGORY_CNAME<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<h3><a name="t65"></a><a name="t65"></a><a id="94_1285"></a>9.4、视图</h3> 
<p><strong>一、含义</strong></p> 
<p>视图是对查询结果的一个封装，视图里面所有的数据，都是来自于它查询的那张表，视图本身不存储任何数据，但是可以修改原数据，但是不建议这样使用</p> 
<p><strong>二、语法</strong></p> 
<p>1、创建视图</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token keyword">view</span> 视图名称
<span class="token keyword">as</span> 查询语句
<span class="token punctuation">[</span><span class="token keyword">with</span> <span class="token keyword">read</span> only<span class="token punctuation">]</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li></ul></pre> 
<p>2、修改视图</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">view</span> 视图名称
<span class="token keyword">as</span> 查询语句
<span class="token punctuation">[</span><span class="token keyword">with</span> <span class="token keyword">read</span> only<span class="token punctuation">]</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li></ul></pre> 
<p>3、删除视图</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">drop</span> <span class="token keyword">view</span> 视图名称<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p><strong>三、演示</strong></p> 
<p>1、创建视图</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token keyword">view</span> view_emp <span class="token keyword">as</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job<span class="token punctuation">,</span>mgr <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p>2、修改视图</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">view</span> view_emp <span class="token keyword">as</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>job<span class="token punctuation">,</span>mgr<span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p>3、删除视图</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">drop</span> <span class="token keyword">view</span> view_emp<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<h3><a name="t66"></a><a name="t66"></a><a id="95_1337"></a>9.5、同义词</h3> 
<p><strong>一、含义</strong></p> 
<p>同义词就是别名的意思和视图的功能类似，就是一种映射关系</p> 
<p><strong>二、语法</strong></p> 
<p>1、创建同义词</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token punctuation">[</span><span class="token keyword">public</span><span class="token punctuation">]</span> synonym 同义词名称 <span class="token keyword">for</span> 对象的名称<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p>2、修改同义词</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token punctuation">[</span><span class="token keyword">public</span><span class="token punctuation">]</span> synonym 同义词名称 <span class="token keyword">for</span> 对象的名称<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p>3、删除同义词</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">drop</span> <span class="token punctuation">[</span><span class="token keyword">public</span><span class="token punctuation">]</span> synonym 同义词名称<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p><strong>三、演示</strong></p> 
<p>1、创建同义词</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--创建</span>
<span class="token keyword">create</span> synonym syno_emp <span class="token keyword">for</span> emp<span class="token punctuation">;</span>
<span class="token comment">--调用</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> syno_emp<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li></ul></pre> 
<p>2、修改同义词</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--创建</span>
<span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> synonym syno_emp_update <span class="token keyword">for</span> emp<span class="token punctuation">;</span>
<span class="token comment">--调用</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> syno_emp_update<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li></ul></pre> 
<p>3、删除同义词</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">drop</span> synonym syno_emp_update<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<h3><a name="t67"></a><a name="t67"></a><a id="96_1389"></a>9.6、游标</h3> 
<p><strong>一、含义</strong></p> 
<p>游标是用来操作查询结果集，相当于是JDBC中ResultSet，它可以对查询的结果一行一行的获取</p> 
<p><strong>二、语法</strong></p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--第一步：定义游标</span>
    <span class="token comment">--第一种：普通游标</span>
    <span class="token keyword">cursor</span> 游标名<span class="token punctuation">[</span><span class="token punctuation">(</span>参数 参数类型<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">is</span> 查询语句<span class="token punctuation">;</span>
    <span class="token comment">--第二种：系统引用游标</span>
    游标名 sys_refcursor<span class="token punctuation">;</span>

<span class="token comment">--第二步：打开游标</span>
    <span class="token comment">--第一种：普通游标</span>
    <span class="token keyword">open</span> 游标名<span class="token punctuation">[</span><span class="token punctuation">(</span>参数 参数类型<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">--第二种：系统引用游标</span>
    <span class="token keyword">open</span> 游标名 <span class="token keyword">for</span> 查询语句<span class="token punctuation">;</span>

<span class="token comment">--第三步：获取一行</span>
	<span class="token keyword">fetch</span> 游标名 <span class="token keyword">into</span> 变量<span class="token punctuation">;</span>

<span class="token comment">--第四步：关闭游标</span>
	<span class="token keyword">close</span> 游标名<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li></ul></pre> 
<p><strong>三、演示</strong></p> 
<p>1、普通游标使用</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--输出指定部门下的员工姓名和工资</span>
<span class="token keyword">declare</span>
  <span class="token comment">--1.声明游标</span>
  <span class="token keyword">cursor</span> vrows<span class="token punctuation">(</span>dno number<span class="token punctuation">)</span> <span class="token operator">is</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> dno<span class="token punctuation">;</span>
  <span class="token comment">--声明变量</span>
  vrow emp<span class="token operator">%</span>rowtype<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  <span class="token comment">--2.打开游标 </span>
  <span class="token keyword">open</span> vrows<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">--3.循环遍历</span>
  <span class="token keyword">loop</span>
    <span class="token keyword">fetch</span> vrows <span class="token keyword">into</span> vrow<span class="token punctuation">;</span>
    <span class="token keyword">exit</span> <span class="token keyword">when</span> vrows<span class="token operator">%</span>notfound<span class="token punctuation">;</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'姓名:'</span> <span class="token operator">||</span> vrow<span class="token punctuation">.</span>ename <span class="token operator">||</span> <span class="token string">' 工资: '</span> <span class="token operator">||</span> vrow<span class="token punctuation">.</span>sal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">end</span> <span class="token keyword">loop</span><span class="token punctuation">;</span>
  <span class="token comment">--4.关闭游标</span>
  <span class="token keyword">close</span> vrows<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li></ul></pre> 
<p>2、系统引用游标使用</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--输出员工表中所有的员工姓名和工资</span>
<span class="token keyword">declare</span>
  <span class="token comment">--1.声明系统引用游标</span>
  vrows sys_refcursor<span class="token punctuation">;</span>
  <span class="token comment">--声明变量</span>
  vrow emp<span class="token operator">%</span>rowtype<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  <span class="token comment">--2.打开游标</span>
  <span class="token keyword">open</span> vrows <span class="token keyword">for</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
  <span class="token comment">--3.循环遍历</span>
  <span class="token keyword">loop</span>
    <span class="token keyword">fetch</span> vrows <span class="token keyword">into</span> vrow<span class="token punctuation">;</span>
    <span class="token keyword">exit</span> <span class="token keyword">when</span> vrows<span class="token operator">%</span>notfound<span class="token punctuation">;</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'姓名:'</span> <span class="token operator">||</span> vrow<span class="token punctuation">.</span>ename <span class="token operator">||</span> <span class="token string">' 工资: '</span> <span class="token operator">||</span> vrow<span class="token punctuation">.</span>sal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">end</span> <span class="token keyword">loop</span><span class="token punctuation">;</span>
  <span class="token comment">--4.关闭游标</span>
  <span class="token keyword">close</span> vrows<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li></ul></pre> 
<p>3、使用for循环输出</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--输出员工表中所有的员工姓名和工资</span>
<span class="token keyword">declare</span>
  <span class="token keyword">cursor</span> vrows <span class="token operator">is</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  <span class="token comment">--自动定义变量vrow，自动打开游标，自动关闭游标</span>
  <span class="token keyword">for</span> vrow <span class="token operator">in</span> vrows <span class="token keyword">loop</span>
    dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'姓名:'</span> <span class="token operator">||</span> vrow<span class="token punctuation">.</span>ename <span class="token operator">||</span> <span class="token string">' 工资: '</span> <span class="token operator">||</span> vrow<span class="token punctuation">.</span>sal <span class="token operator">||</span> <span class="token string">'工作:'</span> <span class="token operator">||</span> vrow<span class="token punctuation">.</span>job<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">end</span> <span class="token keyword">loop</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li></ul></pre> 
<h3><a name="t68"></a><a name="t68"></a><a id="97_1479"></a>9.7、存储过程</h3> 
<p><strong>一、含义</strong></p> 
<p>存储过程实际上是封装在服务器上一段PLSQL代码片断，它已经编译好了，如果客户端调用存储过程，执行效率就会非常高效</p> 
<p><strong>二、语法</strong></p> 
<p>1、创建存储过程</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token keyword">procedure</span> 存储过程名称<span class="token punctuation">(</span>参数名 <span class="token operator">in</span><span class="token operator">|</span><span class="token keyword">out</span> 参数类型<span class="token punctuation">,</span>参数名 <span class="token operator">in</span><span class="token operator">|</span><span class="token keyword">out</span> 参数类型<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token operator">is</span><span class="token operator">|</span><span class="token keyword">as</span>
 <span class="token comment">--声明部分</span>
<span class="token keyword">begin</span>
 <span class="token comment">--业务逻辑 </span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li></ul></pre> 
<p>2、修改存储过程</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token punctuation">[</span><span class="token operator">or</span> <span class="token keyword">replace</span><span class="token punctuation">]</span> <span class="token keyword">procedure</span> 存储过程名称<span class="token punctuation">(</span>参数名 <span class="token operator">in</span><span class="token operator">|</span><span class="token keyword">out</span> 参数类型<span class="token punctuation">,</span>参数名 <span class="token operator">in</span><span class="token operator">|</span><span class="token keyword">out</span> 参数类型<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
<span class="token operator">is</span><span class="token operator">|</span><span class="token keyword">as</span>
 <span class="token comment">--声明部分</span>
<span class="token keyword">begin</span>
 <span class="token comment">--业务逻辑 </span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li></ul></pre> 
<p>3、删除存储过程</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">drop</span> <span class="token keyword">procedure</span> 存储过程名称<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p>4、调用存储过程</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--方式一：</span>
<span class="token keyword">call</span> 存储过程名称<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">--方式二：</span>
<span class="token keyword">declare</span>

<span class="token keyword">begin</span>
  存储过程名称<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li></ul></pre> 
<p><strong>三、演示</strong></p> 
<p>1、创建存储过程</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--给指定员工涨薪并打印涨薪前和涨薪后的工资</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> proc_update_sal<span class="token punctuation">(</span>vempno <span class="token operator">in</span> number<span class="token punctuation">,</span>vnum <span class="token operator">in</span> number<span class="token punctuation">)</span>
<span class="token operator">is</span>
  <span class="token comment">--声明变量</span>
  vsal number<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  <span class="token comment">--查询当前的工资</span>
  <span class="token keyword">select</span> sal <span class="token keyword">into</span> vsal <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">=</span> vempno<span class="token punctuation">;</span>
  <span class="token comment">--输出涨薪前的工资</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'涨薪前:'</span> <span class="token operator">||</span> vsal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">--更新工资</span>
  <span class="token keyword">update</span> emp <span class="token keyword">set</span> sal <span class="token operator">=</span> vsal <span class="token operator">+</span> vnum <span class="token keyword">where</span> empno <span class="token operator">=</span> vempno<span class="token punctuation">;</span>
  <span class="token comment">--输出涨薪后的工资</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'涨薪后:'</span> <span class="token operator">||</span> <span class="token punctuation">(</span>vsal <span class="token operator">+</span> vnum<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">--提交事物</span>
  <span class="token keyword">commit</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token comment">--给员工编号为7521的员工涨工资10元</span>
<span class="token keyword">call</span> proc_update_sal<span class="token punctuation">(</span><span class="token number">7521</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li><li style="color: rgb(153, 153, 153);">19</li><li style="color: rgb(153, 153, 153);">20</li></ul></pre> 
<p>2、修改存储过程</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--给指定员工涨薪并打印涨薪前和涨薪后的工资</span>
<span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">procedure</span> proc_update_sal<span class="token punctuation">(</span>vempno <span class="token operator">in</span> number<span class="token punctuation">,</span>vnum <span class="token operator">in</span> number<span class="token punctuation">)</span>
<span class="token operator">is</span>
  <span class="token comment">--声明变量</span>
  vsal number<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  <span class="token comment">--查询当前的工资</span>
  <span class="token keyword">select</span> sal <span class="token keyword">into</span> vsal <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">=</span> vempno<span class="token punctuation">;</span>
  <span class="token comment">--输出涨薪前的工资</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'涨薪前:'</span> <span class="token operator">||</span> vsal<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">--更新工资</span>
  <span class="token keyword">update</span> emp <span class="token keyword">set</span> sal <span class="token operator">=</span> vsal <span class="token operator">+</span> vnum <span class="token keyword">where</span> empno <span class="token operator">=</span> vempno<span class="token punctuation">;</span>
  <span class="token comment">--输出涨薪后的工资</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'涨薪后:'</span> <span class="token operator">||</span> <span class="token punctuation">(</span>vsal <span class="token operator">+</span> vnum<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">--提交事物</span>
  <span class="token keyword">commit</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token comment">--给员工编号为7521的员工涨工资10元</span>
<span class="token keyword">call</span> proc_update_sal<span class="token punctuation">(</span><span class="token number">7521</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li><li style="color: rgb(153, 153, 153);">19</li><li style="color: rgb(153, 153, 153);">20</li></ul></pre> 
<p>3、删除存储过程</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">drop</span> <span class="token keyword">procedure</span> proc_update_sal<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<h3><a name="t69"></a><a name="t69"></a><a id="98_1587"></a>9.8、函数</h3> 
<p><strong>一、含义</strong></p> 
<p>函数实际上是封装在服务器上一段PLSQL代码片断，它已经编译好了，如果客户端调用存储过程，执行效率就会非常高效，它跟存储过程没有什么本质区别，存储过程能做的函数也能做，只不过函数有返回值</p> 
<p><strong>二、语法</strong></p> 
<p>1、创建函数</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token keyword">function</span> 函数名称<span class="token punctuation">(</span>参数名 <span class="token operator">in</span><span class="token operator">|</span><span class="token keyword">out</span> 参数类型<span class="token punctuation">,</span>参数名 <span class="token operator">in</span><span class="token operator">|</span><span class="token keyword">out</span> 参数类型<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">return</span> 返回的参数类型
<span class="token operator">is</span><span class="token operator">|</span><span class="token keyword">as</span>
 <span class="token comment">--声明部分</span>
<span class="token keyword">begin</span>
 <span class="token comment">--业务逻辑 </span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li></ul></pre> 
<p>2、修改函数</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token punctuation">[</span><span class="token operator">or</span> <span class="token keyword">replace</span><span class="token punctuation">]</span> <span class="token keyword">function</span> 函数名称<span class="token punctuation">(</span>参数名 <span class="token operator">in</span><span class="token operator">|</span><span class="token keyword">out</span> 参数类型<span class="token punctuation">,</span>参数名 <span class="token operator">in</span><span class="token operator">|</span><span class="token keyword">out</span> 参数类型<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">return</span> 返回的参数类型
<span class="token operator">is</span><span class="token operator">|</span><span class="token keyword">as</span>
 <span class="token comment">--声明部分</span>
<span class="token keyword">begin</span>
 <span class="token comment">--业务逻辑 </span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li></ul></pre> 
<p>3、删除函数</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">drop</span> <span class="token keyword">function</span> 函数名称<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p>4、调用函数</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--方式一：</span>
<span class="token keyword">select</span> 函数名称<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">--方式二：</span>
<span class="token keyword">declare</span>
  变量名 变量类型<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  变量名 <span class="token operator">=</span> 函数名称<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li></ul></pre> 
<p><strong>三、演示</strong></p> 
<p>1、创建函数</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询指定员工的年薪</span>
<span class="token comment">/*
    参数 : 员工的编号
    返回 : 员工的年薪          
*/</span>
<span class="token keyword">create</span> <span class="token keyword">function</span> func_getsal<span class="token punctuation">(</span>vempno number<span class="token punctuation">)</span> <span class="token keyword">return</span> number
<span class="token operator">is</span>
  vtotalsal number<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  <span class="token keyword">select</span> sal <span class="token operator">*</span> <span class="token number">12</span> <span class="token operator">+</span> nvl<span class="token punctuation">(</span>comm<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">into</span> vtotalsal <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">=</span> vempno<span class="token punctuation">;</span>
  <span class="token keyword">return</span> vtotalsal<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token comment">--查询员工编号为7788的年薪</span>
<span class="token keyword">declare</span>
  vsal number<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  vsal :<span class="token operator">=</span> func_getsal<span class="token punctuation">(</span><span class="token number">7788</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span>vsal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li><li style="color: rgb(153, 153, 153);">19</li><li style="color: rgb(153, 153, 153);">20</li></ul></pre> 
<p>2、修改函数</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--查询指定员工的年薪</span>
<span class="token comment">/*
    参数 : 员工的编号
    返回 : 员工的年薪          
*/</span>
<span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">function</span> func_getsal<span class="token punctuation">(</span>vempno number<span class="token punctuation">)</span> <span class="token keyword">return</span> number
<span class="token operator">is</span>
  vtotalsal number<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  <span class="token keyword">select</span> sal <span class="token operator">*</span> <span class="token number">12</span> <span class="token operator">+</span> nvl<span class="token punctuation">(</span>comm<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">into</span> vtotalsal <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">=</span> vempno<span class="token punctuation">;</span>
  <span class="token keyword">return</span> vtotalsal<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token comment">--查询员工编号为7788的年薪</span>
<span class="token keyword">declare</span>
  vsal number<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  vsal :<span class="token operator">=</span> func_getsal<span class="token punctuation">(</span><span class="token number">7788</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span>vsal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li><li style="color: rgb(153, 153, 153);">19</li><li style="color: rgb(153, 153, 153);">20</li></ul></pre> 
<p>3、删除函数</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">drop</span> <span class="token keyword">function</span> func_getsal<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<h3><a name="t70"></a><a name="t70"></a><a id="99_1695"></a>9.9、触发器</h3> 
<p><strong>一、含义</strong></p> 
<p>当用户执行了 insert | update | delete 这些操作之后，可以触发一系列其它的动作、业务逻辑，使用触发器可以协助应用在数据库端确保数据的完整性、日志记录 、数据校验等操作。使用别名 OLD 和 NEW 来引用触发器中发生变化的记录内容，这与其他的数据库是相似的。现在Oracle触发器不仅支持行级触发，还支持语句级触发</p> 
<p><strong>二、分类</strong></p> 
<div class="table-box"><table><thead><tr><th>触发器类型</th><th>NEW 和 OLD的使用</th></tr></thead><tbody><tr><td>INSERT 型触发器</td><td>NEW 表示将要或者已经新增的数据</td></tr><tr><td>UPDATE 型触发器</td><td>OLD 表示修改之前的数据 , NEW 表示将要或已经修改后的数据</td></tr><tr><td>DELETE 型触发器</td><td>OLD 表示将要或者已经删除的数据</td></tr></tbody></table></div>
<p><strong>三、语法</strong></p> 
<p>1、创建触发器</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token keyword">trigger</span> 触发器名称
before<span class="token operator">|</span><span class="token keyword">after</span>
<span class="token keyword">insert</span><span class="token operator">|</span><span class="token keyword">update</span><span class="token operator">|</span><span class="token keyword">delete</span> 
<span class="token keyword">on</span> 表名称
<span class="token punctuation">[</span><span class="token keyword">for each row</span><span class="token punctuation">]</span><span class="token comment">--行级触发器</span>
<span class="token keyword">declare</span>
 <span class="token comment">--声明部分</span>
<span class="token keyword">begin</span>
 <span class="token comment">--业务逻辑 </span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li></ul></pre> 
<p>2、修改触发器</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">create</span> <span class="token punctuation">[</span><span class="token operator">or</span> <span class="token keyword">replace</span><span class="token punctuation">]</span> <span class="token keyword">trigger</span> 触发器名称
before<span class="token operator">|</span><span class="token keyword">after</span>
<span class="token keyword">insert</span><span class="token operator">|</span><span class="token keyword">update</span><span class="token operator">|</span><span class="token keyword">delete</span> 
<span class="token keyword">on</span> 表名称
<span class="token punctuation">[</span><span class="token keyword">for each row</span><span class="token punctuation">]</span><span class="token comment">--行级触发器</span>
<span class="token keyword">declare</span>
 <span class="token comment">--声明部分</span>
<span class="token keyword">begin</span>
 <span class="token comment">--业务逻辑 </span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li></ul></pre> 
<p>3、删除触发器</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">drop</span> <span class="token keyword">trigger</span> 触发器名称<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p><strong>四、演示</strong></p> 
<p>1、INSERT 型触发器</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--新员工入职之后，输出一句话: 欢迎加入我们</span>
<span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">trigger</span> tri_emp_insert
<span class="token keyword">after</span>
<span class="token keyword">insert</span>
<span class="token keyword">on</span> emp
<span class="token keyword">declare</span>

<span class="token keyword">begin</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'欢迎加入我们'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token comment">--插入数据就可以自动触发触发器</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp<span class="token punctuation">(</span>empno<span class="token punctuation">,</span> ename<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">9527</span><span class="token punctuation">,</span> <span class="token string">'马哈哈'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li></ul></pre> 
<p>2、UPDATE 型触发器</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--判断员工涨工资后的工资一定要大于涨工资前的工资</span>
<span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">trigger</span> tri_emp_update_sal
before
<span class="token keyword">update</span>
<span class="token keyword">on</span> emp
<span class="token keyword">for each row</span>
<span class="token keyword">declare</span>

<span class="token keyword">begin</span>
  <span class="token keyword">if</span> :old<span class="token punctuation">.</span>sal <span class="token operator">&gt;</span> :new<span class="token punctuation">.</span>sal <span class="token keyword">then</span>
    raise_application_error<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20002</span><span class="token punctuation">,</span><span class="token string">'旧的工资不能大于新的工资'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token comment">--更新数据就可以自动触发触发器（无异常）</span>
<span class="token keyword">update</span> emp <span class="token keyword">set</span> sal <span class="token operator">=</span> sal <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">--更新数据就可以自动触发触发器（有异常）</span>
<span class="token keyword">update</span> emp <span class="token keyword">set</span> sal <span class="token operator">=</span> sal <span class="token operator">-</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li><li style="color: rgb(153, 153, 153);">19</li><li style="color: rgb(153, 153, 153);">20</li><li style="color: rgb(153, 153, 153);">21</li></ul></pre> 
<p>3、DELETE 型触发器</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--老员工离职之后，输出一句话: 有员工离职了</span>
<span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">trigger</span> tri_emp_delete
<span class="token keyword">after</span>
<span class="token keyword">delete</span>
<span class="token keyword">on</span> emp
<span class="token keyword">declare</span>

<span class="token keyword">begin</span>
  dbms_output<span class="token punctuation">.</span>put_line<span class="token punctuation">(</span><span class="token string">'有员工离职了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>

<span class="token comment">--删除数据就可以自动触发触发器</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">9527</span><span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li></ul></pre> 
<p>4、删除触发器</p> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">drop</span> <span class="token keyword">trigger</span> tri_emp_insert<span class="token punctuation">;</span>
<span class="token keyword">drop</span> <span class="token keyword">trigger</span> tri_emp_update_sal<span class="token punctuation">;</span>
<span class="token keyword">drop</span> <span class="token keyword">trigger</span> tri_emp_delete<span class="token punctuation">;</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li></ul></pre> 
<h2><a name="t71"></a><a name="t71"></a><a id="__1819"></a>第十章 数据备份与恢复</h2> 
<h3><a name="t72"></a><a name="t72"></a><a id="101_1821"></a>10.1、全部导出</h3> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--注意：以下操作为cmd命令行操作</span>
全部导出: exp 管理员帐号<span class="token operator">/</span>密码 <span class="token keyword">file</span><span class="token operator">=</span><span class="token string">'d:\beifen.dmp'</span> <span class="token keyword">full</span><span class="token operator">=</span>y
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h3><a name="t73"></a><a name="t73"></a><a id="102_1828"></a>10.2、全部导入</h3> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--注意：以下操作为cmd命令行操作</span>
全部导入: imp 管理员帐号<span class="token operator">/</span>密码 <span class="token keyword">file</span><span class="token operator">=</span><span class="token string">'d:\beifen.dmp'</span> <span class="token keyword">full</span><span class="token operator">=</span>y
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h3><a name="t74"></a><a name="t74"></a><a id="103_1835"></a>10.3、按用户导出</h3> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--注意：以下操作为cmd命令行操作</span>
按用户导出: exp 管理员帐号<span class="token operator">/</span>密码 <span class="token keyword">file</span><span class="token operator">=</span><span class="token string">'d:\beifen.dmp'</span> owner<span class="token operator">=</span>帐号
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h3><a name="t75"></a><a name="t75"></a><a id="104_1842"></a>10.4、按用户导入</h3> 
<pre class="prettyprint"><code class="prism language-sql has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token comment">--注意：以下操作为cmd命令行操作</span>
按用户导入: imp 管理员帐号<span class="token operator">/</span>密码 <span class="token keyword">file</span><span class="token operator">=</span><span class="token string">'d:\beifen.dmp'</span> fromuser<span class="token operator">=</span>帐号
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h2><a name="t76"></a><a name="t76"></a><a id="_Oracle_1849"></a>第十一章 安装Oracle单实例</h2> 
<h3><a name="t77"></a><a name="t77"></a><a id="111_1851"></a>11.1、环境准备</h3> 
<p>注意：当前Linux为CentOS-6.10-x86_64-bin-DVD1.iso</p> 
<p>界面：使用图形界面</p> 
<p>内存：4GB</p> 
<p>硬盘：20GB</p> 
<p>连接：SecureCRT，上传文件（rz命令）需要安装：yum -y install lrzsz</p> 
<h3><a name="t78"></a><a name="t78"></a><a id="112_1863"></a>11.2、下载程序</h3> 
<p>32位需要下载（需要登录账号）：</p> 
<p>http://download.oracle.com/otn/linux/oracle11g/R2/linux_11gR2_database_1of2.zip</p> 
<p>http://download.oracle.com/otn/linux/oracle11g/R2/linux_11gR2_database_2of2.zip</p> 
<p>64位需要下载（需要登录账号）：</p> 
<p>http://download.oracle.com/otn/linux/oracle11g/R2/linux.x64_11gR2_database_1of2.zip</p> 
<p>http://download.oracle.com/otn/linux/oracle11g/R2/linux.x64_11gR2_database_2of2.zip</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE4MzcucG5n?x-oss-process=image/format,png" alt="image-20200814234753366"></p> 
<h3><a name="t79"></a><a name="t79"></a><a id="113_1879"></a>11.3、解压程序</h3> 
<ul><li><strong>上传</strong></li></ul> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE4NDgucG5n?x-oss-process=image/format,png" alt="image-20200815112821911"></p> 
<ul><li><strong>解压</strong> 
  <ul><li>unzip linux.x64_11gR2_database_1of2.zip</li><li>unzip linux.x64_11gR2_database_2of2.zip</li></ul> </li></ul> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE4NTIucG5n?x-oss-process=image/format,png" alt="image-20200815112508045"></p> 
<ul><li>注意：unzip可能会提示没有这个命令，那就需要我们安装一下了 
  <ul><li>yum -y install zip</li><li>yum -y install unzip</li></ul> </li></ul> 
<h3><a name="t80"></a><a name="t80"></a><a id="114_1895"></a>11.4、移动软件</h3> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># mkdir -p /usr/local/oracle</span>
<span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># mv database/ /usr/local/oracle</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h3><a name="t81"></a><a name="t81"></a><a id="115_1902"></a>11.5、域名映射</h3> 
<p>查看当前系统主机名：</p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># hostname</span>
caochenlei
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p>查看当前系统的IP地址：</p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># ifconfig</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p>修改系统的映射文件：</p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># vi /etc/hosts</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p>在末尾添加以下内容：</p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

192.168.112.129 caochenlei
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li></ul></pre> 
<h3><a name="t82"></a><a name="t82"></a><a id="116selinux_1932"></a>11.6、关闭selinux</h3> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># vi /etc/selinux/config</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p>设置SELINUX=disabled</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE5MDUucG5n?x-oss-process=image/format,png" alt="image-20200815113152263"></p> 
<p>临时关闭一下selinux：</p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># setenforce 0</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<h3><a name="t83"></a><a name="t83"></a><a id="117_1948"></a>11.7、关闭防火墙</h3> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># service iptables stop</span>
<span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># chkconfig iptables off</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<h3><a name="t84"></a><a name="t84"></a><a id="118_1955"></a>11.8、安装依赖包</h3> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># yum install -y binutils compat-libcap1 compat-libstdc++-33 gcc gcc-c++ glibc glibc-devel ksh libgcc libstdc++ libstdc++-devel libaio libaio-devel make sysstat unixODBC-devel pdksh java-1.8.0-openjdk*</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<h3><a name="t85"></a><a name="t85"></a><a id="119_1961"></a>11.9、添加新用户</h3> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># groupadd oinstall</span>
<span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># groupadd dba</span>
<span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># useradd -g oinstall -G dba oracle</span>
<span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># passwd oracle</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li></ul></pre> 
<h3><a name="t86"></a><a name="t86"></a><a id="1110_1970"></a>11.10、修改内核文件</h3> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># vi /etc/sysctl.conf</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p>在末尾添加以下内容：</p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">fs.aio-max-nr <span class="token operator">=</span> 1048576
fs.file-max <span class="token operator">=</span> 6815744
kernel.shmall <span class="token operator">=</span> 2097152
kernel.shmmax <span class="token operator">=</span> 536870912
kernel.shmmni <span class="token operator">=</span> 4096
kernel.sem <span class="token operator">=</span> 250 32000 100 128
net.ipv4.ip_local_port_range <span class="token operator">=</span> 9000 65500
net.core.rmem_default <span class="token operator">=</span> 262144
net.core.rmem_max <span class="token operator">=</span> 4194304
net.core.wmem_default <span class="token operator">=</span> 262144
net.core.wmem_max <span class="token operator">=</span> 1048576
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li></ul></pre> 
<p>更新一下文件以生效：</p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># sysctl -p</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<h3><a name="t87"></a><a name="t87"></a><a id="1111_1998"></a>11.11、修改用户限制</h3> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># vi /etc/security/limits.conf</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<p>在末尾添加以下内容：</p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">oracle            soft    nproc           4096
oracle            hard    nproc           65536
oracle            soft    nofile          4096
oracle            hard    nofile          65536
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li></ul></pre> 
<p>修改完成后重启服务器：</p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># reboot</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<h3><a name="t88"></a><a name="t88"></a><a id="1112_2019"></a>11.12、创建安装目录</h3> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># mkdir -p /data/oracle/product/11.2.0</span>
<span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># mkdir -p /data/oracle/oradata</span>
<span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># mkdir -p /data/oracle/inventory</span>
<span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># chown -R oracle:oinstall /data/oracle</span>
<span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># chmod -R 775 /data/oracle</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li></ul></pre> 
<h3><a name="t89"></a><a name="t89"></a><a id="1113_2029"></a>11.13、设置环境变量</h3> 
<p>切换到oracle用户下：</p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># su - oracle</span>
<span class="token punctuation">[</span>oracle@caochenlei ~<span class="token punctuation">]</span>$ <span class="token function">vi</span> .bash_profile
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p>在末尾添加以下内容：</p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">ORACLE_BASE<span class="token operator">=</span>/data/oracle
ORACLE_HOME<span class="token operator">=</span><span class="token variable">$ORACLE_BASE</span>/product/11.2.0
ORACLE_SID<span class="token operator">=</span>orcl
PATH<span class="token operator">=</span><span class="token variable">$PATH</span><span class="token keyword">:</span><span class="token variable">$ORACLE_HOME</span>/bin
<span class="token function">export</span> ORACLE_BASE ORACLE_HOME ORACLE_SID PATH
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li></ul></pre> 
<p>更新一下文件以生效：</p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>oracle@caochenlei ~<span class="token punctuation">]</span>$ <span class="token function">source</span> .bash_profile
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li></ul></pre> 
<h3><a name="t90"></a><a name="t90"></a><a id="1114_2054"></a>11.14、安装应用程序</h3> 
<p>这一步需要在虚拟机里进行，因为会弹出窗体程序</p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>oracle@caochenlei response<span class="token punctuation">]</span>$ <span class="token function">cd</span> /usr/local/oracle/database/
<span class="token punctuation">[</span>oracle@caochenlei database<span class="token punctuation">]</span>$ LANG<span class="token operator">=</span>en_US ./runInstaller
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul></pre> 
<p>用户安装截图：</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE5MTIucG5n?x-oss-process=image/format,png" alt="image-20200815153323361"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE5MTYucG5n?x-oss-process=image/format,png" alt="image-20200815155512148"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE5MjIucG5n?x-oss-process=image/format,png" alt="image-20200815153513163"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE5MjYucG5n?x-oss-process=image/format,png" alt="image-20200815153547499"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE5MzAucG5n?x-oss-process=image/format,png" alt="image-20200815153626997"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE5MzMucG5n?x-oss-process=image/format,png" alt="image-20200815153657475"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE5MzYucG5n?x-oss-process=image/format,png" alt="image-20200815153729540"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE5NDAucG5n?x-oss-process=image/format,png" alt="image-20200815153824581"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE5NDMucG5n?x-oss-process=image/format,png" alt="image-20200815153957027"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE5NDYucG5n?x-oss-process=image/format,png" alt="image-20200815154108122"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE5NDkucG5n?x-oss-process=image/format,png" alt="image-20200815154148082"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE5NTMucG5n?x-oss-process=image/format,png" alt="image-20200815154212906"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTE5NTYucG5n?x-oss-process=image/format,png" alt="image-20200815154308140"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwMDAucG5n?x-oss-process=image/format,png" alt="image-20200815154359483"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwMDMucG5n?x-oss-process=image/format,png" alt="image-20200815154441764"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwMDcucG5n?x-oss-process=image/format,png" alt="image-20200815154519739"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwMTEucG5n?x-oss-process=image/format,png" alt="image-20200815154553810"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwMTUucG5n?x-oss-process=image/format,png" alt="image-20200815154725075"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwMTgucG5n?x-oss-process=image/format,png" alt="image-20200815154757587"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwMjIucG5n?x-oss-process=image/format,png" alt="image-20200815154819955"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwMjYucG5n?x-oss-process=image/format,png" alt="image-20200815154851708"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwMzAucG5n?x-oss-process=image/format,png" alt="image-20200815154929732"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwMzQucG5n?x-oss-process=image/format,png" alt="image-20200815155820687"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwMzcucG5n?x-oss-process=image/format,png" alt="image-20200815160744645"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwNDAucG5n?x-oss-process=image/format,png" alt="image-20200815161507657"></p> 
<p>然后提示要执行两个脚本，使用root执行，可以使用SecureCRT重新新建一个连接进行</p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># sh /data/oracle/inventory/orainstRoot.sh</span>
Changing permissions of /data/oracle/inventory.
Adding read,write permissions <span class="token keyword">for</span> group.
Removing read,write,execute permissions <span class="token keyword">for</span> world.

Changing groupname of /data/oracle/inventory to oinstall.
The execution of the script is complete.
<span class="token punctuation">[</span>root@caochenlei ~<span class="token punctuation">]</span><span class="token comment"># sh /data/oracle/product/11.2.0/dbhome_1/root.sh</span>
Running Oracle 11g root.sh script<span class="token punctuation">..</span>.

The following environment variables are <span class="token keyword">set</span> as:
    ORACLE_OWNER<span class="token operator">=</span> oracle
    ORACLE_HOME<span class="token operator">=</span>  /data/oracle/product/11.2.0/dbhome_1

Enter the full pathname of the local bin directory: <span class="token punctuation">[</span>/usr/local/bin<span class="token punctuation">]</span>: 
   Copying dbhome to /usr/local/bin <span class="token punctuation">..</span>.
   Copying oraenv to /usr/local/bin <span class="token punctuation">..</span>.
   Copying coraenv to /usr/local/bin <span class="token punctuation">..</span>.


Creating /etc/oratab file<span class="token punctuation">..</span>.
Entries will be added to the /etc/oratab <span class="token function">file</span> as needed by
Database Configuration Assistant when a database is created
Finished running generic part of root.sh script.
Now product-specific root actions will be performed.
Finished product-specific root actions.
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li><li style="color: rgb(153, 153, 153);">19</li><li style="color: rgb(153, 153, 153);">20</li><li style="color: rgb(153, 153, 153);">21</li><li style="color: rgb(153, 153, 153);">22</li><li style="color: rgb(153, 153, 153);">23</li><li style="color: rgb(153, 153, 153);">24</li><li style="color: rgb(153, 153, 153);">25</li><li style="color: rgb(153, 153, 153);">26</li></ul></pre> 
<p>执行完成，点ok，安装成功</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwNDQucG5n?x-oss-process=image/format,png" alt="image-20200815161347478"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwNDcucG5n?x-oss-process=image/format,png" alt="image-20200815161921773"></p> 
<h3><a name="t91"></a><a name="t91"></a><a id="1115sqlplus_2152"></a>11.15、使用sqlplus连接</h3> 
<p><strong>配套资料，免费下载</strong><br> 链接:https://pan.baidu.com/s/1yjJY3IstA8aMQBPYhWNlCw<br> 提取码:qmpd<br> 复制这段内容后打开百度网盘手机App，操作更方便哦</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwNTEucG5n?x-oss-process=image/format,png" alt="image-20200815162350374"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwNTUucG5n?x-oss-process=image/format,png" alt="image-20200815162421975"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIwNTgucG5n?x-oss-process=image/format,png" alt="image-20200815162501212"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIxMDEucG5n?x-oss-process=image/format,png" alt="image-20200815162638326"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIxMDcucG5n?x-oss-process=image/format,png" alt="image-20200815162706399"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIxMDkucG5n?x-oss-process=image/format,png" alt="image-20200815162923228"></p> 
<pre class="prettyprint"><code class="prism language-shell has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">ORCL <span class="token operator">=</span>
  <span class="token punctuation">(</span>DESCRIPTION <span class="token operator">=</span>
    <span class="token punctuation">(</span>ADDRESS <span class="token operator">=</span> <span class="token punctuation">(</span>PROTOCOL <span class="token operator">=</span> TCP<span class="token punctuation">)</span><span class="token punctuation">(</span>HOST <span class="token operator">=</span> 192.168.112.129<span class="token punctuation">)</span><span class="token punctuation">(</span>PORT <span class="token operator">=</span> 1521<span class="token punctuation">))</span>
    <span class="token punctuation">(</span>CONNECT_DATA <span class="token operator">=</span>
      <span class="token punctuation">(</span>SERVER <span class="token operator">=</span> DEDICATED<span class="token punctuation">)</span>
      <span class="token punctuation">(</span>SERVICE_NAME <span class="token operator">=</span> orcl<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li></ul></pre> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIxMTQucG5n?x-oss-process=image/format,png" alt="image-20200815163222563"></p> 
<p>新建一个系统环境变量，变量名为TNS_ADMIN，变量值为tnsnames.ora所在文件夹的全路径</p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIxMTgucG5n?x-oss-process=image/format,png" alt="image-20200815163537742"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIxMjIucG5n?x-oss-process=image/format,png" alt="image-20200815164417904"></p> 
<p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9naXRlZS5jb20vY2FvY2hlbmxlaS9CbG9nSW1hZ2VzL3Jhdy9tYXN0ZXIvMjAyMDA4MjYwOTIxMjcucG5n?x-oss-process=image/format,png" alt="image-20200815164321896"></p>
                </div><div data-report-view="{&quot;mod&quot;:&quot;1585297308_001&quot;,&quot;dest&quot;:&quot;https://caochenlei.blog.csdn.net/article/details/107976731&quot;,&quot;extend1&quot;:&quot;pc&quot;,&quot;ab&quot;:&quot;new&quot;}"><div></div></div>
                <link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-d7a94ec6ab.css" rel="stylesheet">
                <link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-ba784fbaf8.css" rel="stylesheet">
        </div>